<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 2 Datos geográficos en R | Geocomputación con R</title>
<meta name="author" content="Robin Lovelace, Jakub Nowosad, Jannes Muenchow">
<meta name="description" content="Prerrequisitos Este es el primer capítulo práctico del libro y, por lo tanto, conlleva algunos requisitos de software. Suponemos que ya tienes instalada una versión actualizada de R y que te...">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="Chapter 2 Datos geográficos en R | Geocomputación con R">
<meta property="og:type" content="book">
<meta property="og:url" content="https://geocompr.github.io/es/spatial-class.html">
<meta property="og:image" content="https://geocompr.github.io/es/images/cover.png">
<meta property="og:description" content="Prerrequisitos Este es el primer capítulo práctico del libro y, por lo tanto, conlleva algunos requisitos de software. Suponemos que ya tienes instalada una versión actualizada de R y que te...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 2 Datos geográficos en R | Geocomputación con R">
<meta name="twitter:description" content="Prerrequisitos Este es el primer capítulo práctico del libro y, por lo tanto, conlleva algunos requisitos de software. Suponemos que ya tienes instalada una versión actualizada de R y que te...">
<meta name="twitter:image" content="https://geocompr.github.io/es/images/cover.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.11/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><link href="libs/_Lato-0.4.0/font.css" rel="stylesheet">
<link href="libs/_Roboto%20Mono-0.4.0/font.css" rel="stylesheet">
<link href="libs/_Montserrat-0.4.0/font.css" rel="stylesheet">
<script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-99618359-1', 'auto');
      ga('send', 'pageview');

    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS -->
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Geocomputación con R</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Bienvenido</a></li>
<li><a class="" href="pr%C3%B3logo-1a-edici%C3%B3n.html">Prólogo (1a Edición)</a></li>
<li><a class="" href="prefacio.html">Prefacio</a></li>
<li><a class="" href="intro.html"><span class="header-section-number">1</span> Introducción</a></li>
<li class="book-part">Fundamentos</li>
<li><a class="active" href="spatial-class.html"><span class="header-section-number">2</span> Datos geográficos en R</a></li>
<li><a class="" href="attr.html"><span class="header-section-number">3</span> Operaciones de datos de atributos</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/geocompr/es">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="spatial-class" class="section level1" number="2">
<h1>
<span class="header-section-number">2</span> Datos geográficos en R<a class="anchor" aria-label="anchor" href="#spatial-class"><i class="fas fa-link"></i></a>
</h1>
<div id="prerrequisitos" class="section level2 unnumbered">
<h2>Prerrequisitos<a class="anchor" aria-label="anchor" href="#prerrequisitos"><i class="fas fa-link"></i></a>
</h2>
<p>Este es el primer capítulo práctico del libro y, por lo tanto, conlleva algunos requisitos de software.
Suponemos que ya tienes instalada una versión actualizada de R y que te sientes cómodo utilizando el software con una interfaz de línea de comandos como el entorno de desarrollo integrado (IDE) RStudio.
<!--or VSCode?--></p>
<p>Si eres nuevo en R, te recomendamos leer el capítulo 2 del libro en línea <em>Efficient R Programming</em> de <span class="citation"><a href="attr.html#ref-gillespie_efficient_2016" role="doc-biblioref">Gillespie and Lovelace</a> (<a href="attr.html#ref-gillespie_efficient_2016" role="doc-biblioref">2016</a>)</span> y aprender los fundamentos del lenguaje con recursos como R for Data Science de <span class="citation"><a href="attr.html#ref-grolemund_r_2016" role="doc-biblioref">Grolemund and Wickham</a> (<a href="attr.html#ref-grolemund_r_2016" role="doc-biblioref">2016</a>)</span>.
Organiza tu trabajo (por ejemplo, con proyectos de RStudio) y asigna a los scripts nombres sensatos como <code>02-chapter.R</code> para documentar el código que escribes a medida que aprendes.
</p>
<p>Los paquetes utilizados en este capítulo pueden instalarse con los siguientes comandos:<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;
&lt;strong&gt;spDataLarge&lt;/strong&gt; no se encuentra en CRAN, con lo cual deberá instalarse via &lt;em&gt;r-universe&lt;/em&gt; o mediante el comando siguiente:&lt;code&gt;remotes::install_github("Nowosad/spDataLarge")&lt;/code&gt;.&lt;/p&gt;'><sup>5</sup></a></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"sf"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"terra"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"spData"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"spDataLarge"</span>, repos <span class="op">=</span> <span class="st">"https://nowosad.r-universe.dev"</span><span class="op">)</span></code></pre></div>


<div class="rmdnote">
<p>Si estás trabajando con Mac o Linux, es posible que el comando anterior para instalar <strong>sf</strong> no funcione la primera vez.
Estos sistemas operativos (SO) tienen “requisitos del sistema” que se describen en el <a href="https://github.com/r-spatial/sf">README</a> del paquete.
Se pueden encontrar varias instrucciones específicas para cada SO en línea, como el artículo <em>Instalación de R 4.0 en Ubuntu 20.04</em> (<em>Installation of R 4.0 on Ubuntu 20.04</em> en inglés) en el blog <a href="https://rtask.thinkr.fr/installation-of-r-4-0-on-ubuntu-20-04-lts-and-tips-for-spatial-packages/">rtask.thinkr.fr</a>.</p>
</div>
<p>Todos los paquetes necesarios para reproducir el contenido del libro se pueden instalar con el siguiente comando:
<code>remotes::install_github("geocompr/geocompkg")</code>.
Los paquetes necesarios se pueden “cargar” (técnicamente se adjuntan) con la función <code><a href="https://rdrr.io/r/base/library.html">library()</a></code> de la siguiente manera:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/">sf</a></span><span class="op">)</span>          <span class="co"># clases y funciones para datos vectoriales</span>
<span class="co">#&gt; Linking to GEOS 3.8.0, GDAL 3.0.4, PROJ 6.3.1; sf_use_s2() is TRUE</span></code></pre></div>
<p>La salida de <code><a href="https://r-spatial.github.io/sf/">library(sf)</a></code> informa de las versiones de las bibliotecas geográficas clave (key geographic libraries), como GEOS, la cual ya está utilizando el paquete, como se indica en la Sección <a href="spatial-class.html#intro-sf">2.2.1</a>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/terra/">terra</a></span><span class="op">)</span>      <span class="co"># clases y funciones para datos rasterizados</span></code></pre></div>
<p>Los demás paquetes instalados contienen datos que se utilizarán en el libro:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://nowosad.github.io/spData/">spData</a></span><span class="op">)</span>        <span class="co"># cargar datos geográficos</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Nowosad/spData">spDataLarge</a></span><span class="op">)</span>   <span class="co"># cargar datos geográficos de mayor tamaño</span></code></pre></div>
</div>
<div id="intro-spatial-class" class="section level2" number="2.1">
<h2>
<span class="header-section-number">2.1</span> Introducción<a class="anchor" aria-label="anchor" href="#intro-spatial-class"><i class="fas fa-link"></i></a>
</h2>
<p>En este capítulo se explicarán brevemente los modelos de datos geográficos fundamentales: vectorial y rasterizado.
Introduciremos la teoría detrás de cada modelo de datos y las disciplinas en las que predominan, antes de demostrar su implementación en R.</p>
<p>El <em>modelo de datos vectoriales</em> representa el mundo mediante puntos, líneas y polígonos.
Estos tienen bordes discretos y bien definidos, lo que significa que los conjuntos de datos vectoriales suelen tener un alto nivel de precisión (pero no necesariamente exactitud, como veremos en el apartado <a href="#units"><strong>??</strong></a>).
El <em>modelo de datos ráster</em> divide la superficie en celdas de tamaño constante.
Los conjuntos de datos ráster son la base de las imágenes de fondo utilizadas en la cartografía web y han sido una fuente vital de datos geográficos desde los orígenes de la fotografía aérea y los dispositivos de teledetección por satélite.
Los rásteres agregan características espacialmente específicas a una resolución determinada, lo que significa que son consistentes en el espacio y escalables (existen muchos conjuntos de datos ráster a nivel mundial).</p>
<p>¿Cuál utilizar?
La respuesta depende probablemente de su ámbito de aplicación:</p>
<ul>
<li>Los datos vectoriales tienden a dominar las ciencias sociales porque los asentamientos humanos tienden a tener fronteras discretas</li>
<li>Los datos rasterizados predominan en las ciencias medioambientales debido a la dependencia de los datos de teledetección</li>
</ul>
<p>En algunos campos hay mucho solapamiento y los conjuntos de datos ráster y vectoriales pueden utilizarse conjuntamente:
los ecologistas y los demógrafos, por ejemplo, suelen utilizar tanto datos vectoriales como rasterizados.
Además, es posible la conversión entre ambas formas (véase el apartado <a href="#raster-vector"><strong>??</strong></a>).
Independientemente de si tu trabajo implica un mayor uso de los conjuntos de datos vectoriales o rasterizados, merece la pena comprender el modelo de datos subyacente antes de utilizarlos, como se explica en los capítulos siguientes.
Este libro utiliza los paquetes <strong>sf</strong> y <strong>raster</strong> para trabajar con datos vectoriales y conjuntos de datos raster, respectivamente.</p>
</div>
<div id="datos-vectoriales" class="section level2" number="2.2">
<h2>
<span class="header-section-number">2.2</span> Datos vectoriales<a class="anchor" aria-label="anchor" href="#datos-vectoriales"><i class="fas fa-link"></i></a>
</h2>

<div class="rmdnote">
Ten cuidado al utilizar la palabra ‘vector,’ ya que puede tener dos significados en este libro:
datos vectoriales geográficos y la clase vector (nótese el tipo de letra <code>monospace</code>) en R.
El primero es un modelo de datos, el segundo es una clase de R al igual que <code>data.frame</code> y <code>matrix</code>.
Sin embargo, existe un vínculo entre ambos: las coordenadas espaciales que constituyen el núcleo del modelo de datos vectoriales geográficos pueden representarse en R mediante objetos <code>vectoriales</code>.
</div>
<p>El modelo de datos vectoriales geográficos se basa en puntos situados dentro de un sistema de referencia de coordenadas (SRC, CRS en inglés).
Los puntos pueden representar características autónomas (por ejemplo, la ubicación de una parada de autobús) o pueden estar vinculados entre sí para formar geometrías más complejas, como líneas y polígonos.
La mayoría de las geometrías de puntos contienen sólo dos dimensiones (los SRC tridimensionales contienen un valor <span class="math inline">\(z\)</span> adicional, que suele representar la altura sobre el nivel del mar).</p>
<p>En este sistema, Londres, por ejemplo, puede representarse con las coordenadas <code>c(-0.1, 51.5)</code>.
Esto significa que su ubicación es -0,1 grados al este y 51,5 grados al norte del origen.
En este caso, el origen se encuentra a 0 grados de longitud (el Primer Meridiano o Meridiano de Greenwich) y 0 grados de latitud (Ecuador) en un SRC geográfico (‘lon/lat’) (Figura <a href="spatial-class.html#fig:vectorplots">2.1</a>, panel izquierdo).
El mismo punto también podría aproximarse en un SRC proyectado con valores ‘Este/Norte’ de <code>c(530000, 180000)</code> en la <a href="https://en.wikipedia.org/wiki/Ordnance_Survey_National_Grid">British National Grid</a>, lo que significa que Londres se encuentra a 530 km al <em>Este</em> y 180 km al <em>Norte</em> del <span class="math inline">\(origen\)</span> del SRC.
Esto puede comprobarse visualmente: algo más de 5 ‘casillas’ -áreas cuadradas delimitadas por las líneas grises de la cuadrícula de 100 km de ancho- separan el punto que representa a Londres del origen (Figura <a href="spatial-class.html#fig:vectorplots">2.1</a>, panel derecho).</p>
<p>La ubicación del origen de National Grid, en el mar más allá del Suroeste de la península, garantiza que la mayoría de las ubicaciones en el Reino Unido tengan valores positivos de Orientación y Longitud.<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;
El origen al que nos referimos, representado en azul en la figura (fig:vectorplots), es en realidad el origen “falso.”
El origen “verdadero,” el lugar en el que las distorsiones son mínimas, está situado en 2° O y 49° N.
El Ordnance Survey seleccionó este punto para situarlo aproximadamente en el centro de la masa terrestre británica en sentido longitudinal.&lt;/p&gt;"><sup>6</sup></a>
Hay más aspectos sobre los SRC, como se describe en las secciones <a href="spatial-class.html#crs-intro">2.4</a> y <a href="#reproj-geo-data"><strong>??</strong></a>, pero, para los propósitos de esta sección, es suficiente saber que las coordenadas consisten en dos números que representan la distancia desde un origen, generalmente en <span class="math inline">\(x\)</span> y luego <span class="math inline">\(y\)</span> para las dimensiones.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:vectorplots"></span>
<img src="figures/vector_lonlat.png" alt="Ilustración de datos vectoriales (puntos) en los que la ubicación de Londres (la X roja) se representa con referencia a un origen (el círculo azul). El gráfico de la izquierda representa un SRC geográfico con un origen a 0° tanto para la longitud como para la latitud. El gráfico de la derecha representa un SRC proyectado con el origen situado en el mar al Suroeste peninsular." width="49%"><img src="figures/vector_projected.png" alt="Ilustración de datos vectoriales (puntos) en los que la ubicación de Londres (la X roja) se representa con referencia a un origen (el círculo azul). El gráfico de la izquierda representa un SRC geográfico con un origen a 0° tanto para la longitud como para la latitud. El gráfico de la derecha representa un SRC proyectado con el origen situado en el mar al Suroeste peninsular." width="49%"><p class="caption">
FIGURE 2.1: Ilustración de datos vectoriales (puntos) en los que la ubicación de Londres (la X roja) se representa con referencia a un origen (el círculo azul). El gráfico de la izquierda representa un SRC geográfico con un origen a 0° tanto para la longitud como para la latitud. El gráfico de la derecha representa un SRC proyectado con el origen situado en el mar al Suroeste peninsular.
</p>
</div>
<p><strong>sf</strong> es un paquete que proporciona un sistema de clases para datos vectoriales geográficos.
<strong>sf</strong> no sólo sustituye a <strong>sp</strong>, sino que también proporciona una interfaz de línea de comandos consistente para GEOS y GDAL, sustituyendo a <strong>rgeos</strong> y <strong>rgdal</strong> (descritos en la Sección <a href="#the-history-of-r-spatial"><strong>??</strong></a>).
Esta sección presenta las clases <strong>sf</strong> como preparación para los capítulos siguientes (los capítulos @ref(geometric-operations y <a href="#read-write"><strong>??</strong></a> cubren la interfaz de GEOS y GDAL, respectivamente).</p>
<div id="intro-sf" class="section level3" number="2.2.1">
<h3>
<span class="header-section-number">2.2.1</span> Introducción a Simple Features<a class="anchor" aria-label="anchor" href="#intro-sf"><i class="fas fa-link"></i></a>
</h3>
<p>Simple Features (en ocasiones también llamado Simple feature access (SFA)) es un <a href="http://portal.opengeospatial.org/files/?artifact_id=25355">estándar abierto</a> desarrollado y respaldado por el Open Geospatial Consortium (OGC), una organización sin ánimo de lucro cuyas actividades volveremos a tratar en un capítulo posterior (en la sección <a href="#file-formats"><strong>??</strong></a>.

Simple Features es un modelo de datos jerárquico que representa una amplia gama de tipos de geometría.
De los 17 tipos de geometría que soporta la especificación, solo 7 se utilizan en la gran mayoría de las investigaciones geográficas (véase la figura <a href="spatial-class.html#fig:sf-ogc">2.2</a>);
estos tipos de geometría básicos son totalmente compatibles con el paquete de R <strong>sf</strong> <span class="citation">(<a href="attr.html#ref-pebesma_simple_2018" role="doc-biblioref">E. Pebesma 2018</a>)</span>.<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;
El estándar OGC completo incluye tipos de geometría bastante exóticos, como los tipos “superficie” y “curva,” los cuales actualmente tienen una aplicación limitada en las aplicaciones del mundo real.
Los 17 tipos pueden representarse con el paquete &lt;strong&gt;sf&lt;/strong&gt;, aunque (a partir del verano de 2018) el trazado solo funciona para el “núcleo 7.”&lt;/p&gt;"><sup>7</sup></a></p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:sf-ogc"></span>
<img src="figures/sf-classes.png" alt="Tipos de Simple Features compatibles con sf." width="60%"><p class="caption">
FIGURE 2.2: Tipos de Simple Features compatibles con sf.
</p>
</div>
<p><strong>sf</strong> puede representar todos los tipos de geometría vectorial comunes (las clases de datos rasterizados no son soportadas por <strong>sf</strong>): puntos, líneas, polígonos y sus respectivas versiones ‘multi’ (que agrupan elementos del mismo tipo en una sola función).


<strong>sf</strong> también soporta colecciones geométricas, las cuales pueden contener múltiples tipos de geometrías en un solo objeto.
<strong>sf</strong> proporciona la misma funcionalidad (y más) que previamente se ofrecía en tres paquetes: <strong>sp</strong> para las clases de datos <span class="citation">(<a href="attr.html#ref-R-sp" role="doc-biblioref">E. Pebesma and Bivand 2018</a>)</span>, <strong>rgdal</strong> para la lectura/escritura de datos a través de una interfaz para GDAL y PROJ <span class="citation">(<a href="attr.html#ref-R-rgdal" role="doc-biblioref">R. Bivand, Keitt, and Rowlingson 2018</a>)</span> y <strong>rgeos</strong> para las operaciones espaciales a través de una interfaz para GEOS <span class="citation">(<a href="attr.html#ref-R-rgeos" role="doc-biblioref">R. Bivand and Rundel 2018</a>)</span>.
Para reiterar el mensaje del capítulo 1, los paquetes geográficos de R tienen una larga historia de interfaces con librerías de bajo nivel, y <strong>sf</strong> mantiene esta tradición con una interfaz unificada con versiones recientes de la librería GEOS para operaciones geométricas, la librería GDAL para leer y escribir archivos de datos geográficos, y la librería PROJ para representar y transformar sistemas de referencia de coordenadas proyectadas.
Este es un logro notable que reduce el espacio necesario para ‘cambiar de contexto’ entre diferentes paquetes y permite el acceso a librerías geográficas de alto rendimiento.
La documentación sobre <strong>sf</strong> puede encontrarse en su sitio web y en 6 ‘viñetas,’ que pueden cargarse de la siguiente manera:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/vignette.html">vignette</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">"sf"</span><span class="op">)</span> <span class="co"># ver qué viñetas están disponibles</span>
<span class="fu"><a href="https://rdrr.io/r/utils/vignette.html">vignette</a></span><span class="op">(</span><span class="st">"sf1"</span><span class="op">)</span>          <span class="co"># introducción al paquete</span></code></pre></div>
<p>Como se explica en la primera viñeta, los objetos ‘Simple Feature’ en R se almacenan en un marco de datos, con los datos geográficos ocupando una columna especial, normalmente llamada ‘geom’ o ‘geometry.’
Utilizaremos el conjunto de datos <code>world</code> proporcionado por el paquete <strong>spData</strong>, cargado al principio de este capítulo (véase <a href="https://nowosad.github.io/spData/">nowosad.github.io/spData</a> para ver una lista de conjuntos de datos cargados por el paquete).
<code>world</code> es un objeto espacial que contiene columnas espaciales y atributos, cuyos nombres son devueltos por la función <code><a href="https://rdrr.io/pkg/terra/man/names.html">names()</a></code> (la última columna contiene la información geográfica):</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/terra/man/names.html">names</a></span><span class="op">(</span><span class="va">world</span><span class="op">)</span>
<span class="co">#&gt;  [1] "iso_a2"    "name_long" "continent" "region_un" "subregion" "type"     </span>
<span class="co">#&gt;  [7] "area_km2"  "pop"       "lifeExp"   "gdpPercap" "geom"</span></code></pre></div>
<p>El contenido de la columna <code>geom</code> proporciona a los objetos <code>sf</code> sus poderes espaciales: <code>world$geom</code> es una ‘<a href="https://jennybc.github.io/purrr-tutorial/ls13_list-columns.html">columna lista</a>’ que contiene todas las coordenadas de los polígonos de cada uno de los países.

El paquete <strong>sf</strong> proporciona un método <code><a href="https://rdrr.io/pkg/terra/man/plot.html">plot()</a></code> para visualizar los datos geográficos:
el siguiente comando crea la Figura <a href="spatial-class.html#fig:world-all">2.3</a>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html">plot</a></span><span class="op">(</span><span class="va">world</span><span class="op">)</span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:world-all"></span>
<img src="02-datos-espaciales_files/figure-html/world-all-1.png" alt="Un gráfico espacial del mundo utilizando el paquete sf, con un panel por cada atributo del conjunto de datos." width="100%"><p class="caption">
FIGURE 2.3: Un gráfico espacial del mundo utilizando el paquete sf, con un panel por cada atributo del conjunto de datos.
</p>
</div>
<p>Observa que en lugar de crear un único mapa, como harían la mayoría de los programas SIG, el comando <code><a href="https://rdrr.io/pkg/terra/man/plot.html">plot()</a></code> ha creado múltiples mapas, uno para cada variable en los conjuntos de datos de <code>world</code>.
Este procedimiento puede ser útil para explorar la distribución espacial de diferentes variables y se trata más adelante, en la sección <a href="spatial-class.html#basic-map">2.2.3</a>.</p>
<p>Poder tratar los objetos espaciales como marcos de datos ordinarios pero con poderes espaciales tiene muchas ventajas, especialmente si ya estás acostumbrado a trabajar con marcos de datos.
La función <code><a href="https://rdrr.io/pkg/terra/man/summary.html">summary()</a></code>, por ejemplo, proporciona una útil visión general de las variables dentro del objeto <code>world</code>.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/terra/man/summary.html">summary</a></span><span class="op">(</span><span class="va">world</span><span class="op">[</span><span class="st">"lifeExp"</span><span class="op">]</span><span class="op">)</span>
<span class="co">#&gt;     lifeExp                geom    </span>
<span class="co">#&gt;  Min.   :50.6   MULTIPOLYGON :177  </span>
<span class="co">#&gt;  1st Qu.:65.0   epsg:4326    :  0  </span>
<span class="co">#&gt;  Median :72.9   +proj=long...:  0  </span>
<span class="co">#&gt;  Mean   :70.9                      </span>
<span class="co">#&gt;  3rd Qu.:76.8                      </span>
<span class="co">#&gt;  Max.   :83.6                      </span>
<span class="co">#&gt;  NA's   :10</span></code></pre></div>
<p>Aunque sólo hemos seleccionado una variable para el comando <code>summary</code>, éste también emite un informe sobre la geometría.
Esto demuestra el comportamiento “pegajoso” de las columnas con geometrías de los objetos <strong>sf</strong>, lo que significa que los datos geométricos se mantienen a menos que el usuario las elimine deliberadamente, como veremos en la sección <a href="#vector-attribute-manipulation"><strong>??</strong></a>.
El resultado proporciona un rápido resumen de los datos espaciales y no espaciales contenidos en <code>world</code>: la media de la esperanza de vida es de 71 años (oscilando entre menos de 51 y más de 83 años, con una mediana de 73 años) en todos los países.</p>

<div class="rmdnote">
La palabra <code>MULTIPOLYGON</code> (Multipolígono en español) en el resultado del sumario anterior se refiere al tipo de geometría de las figuras (países) en el objeto <code>world</code>.
Esta representación es necesaria para países con islas como Indonesia y Grecia.
Otros tipos de geometría se describen en el apartado <a href="spatial-class.html#geometry">2.2.5</a>.
</div>
<p>Merece la pena profundizar en el comportamiento y el contenido básicos de este objeto Simple feature, que puede considerarse útilmente como un ‘marco de datos espaciales’ (‘Spatial data frame’ en inglés).</p>
<p>Los objetos <code>sf</code> son fáciles de subdividir.
El código siguiente muestra sus dos primeras filas y tres columnas.
El resultado muestra dos diferencias importantes en comparación con un <code>data.frame</code> normal: la inclusión de datos geográficos adicionales (<code>tipo de geometría</code>, <code>dimensión</code>, <code>bbox</code> e información SRC - <code>epsg (SRID)</code>, <code>proj4string</code>), y la presencia de una columna de <code>geometría</code>, aquí denominada <code>geom</code>:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">world_mini</span> <span class="op">=</span> <span class="va">world</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span>
<span class="va">world_mini</span>
<span class="co">#&gt; Simple feature collection with 2 features and 3 fields</span>
<span class="co">#&gt; Geometry type: MULTIPOLYGON</span>
<span class="co">#&gt; Dimension:     XY</span>
<span class="co">#&gt; Bounding box:  xmin: -180 ymin: -18.3 xmax: 180 ymax: -0.95</span>
<span class="co">#&gt; Geodetic CRS:  WGS 84</span>
<span class="co">#&gt; # A tibble: 2 × 4</span>
<span class="co">#&gt;   iso_a2 name_long continent                                                geom</span>
<span class="co">#&gt;   &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;                                      &lt;MULTIPOLYGON [°]&gt;</span>
<span class="co">#&gt; 1 FJ     Fiji      Oceania   (((-180 -16.6, -180 -16.5, -180 -16, -180 -16.1, -…</span>
<span class="co">#&gt; 2 TZ     Tanzania  Africa    (((33.9 -0.95, 31.9 -1.03, 30.8 -1.01, 30.4 -1.13,…</span></code></pre></div>
<p>Todo esto puede parecer bastante complejo, especialmente para un sistema de clases que se supone que es sencillo.
Sin embargo, hay buenas razones para organizar las cosas de esta manera y utilizar <strong>sf</strong>.</p>
<p>Antes de describir cada tipo de geometría que permite el paquete <strong>sf</strong>, vale la pena dar un paso atrás para entender los bloques de construcción de los objetos <code>sf</code>.
La sección <a href="spatial-class.html#sf">2.2.8</a> muestra cómo los objetos Simple features son marcos de datos, con columnas especiales de geometría.
Estas columnas espaciales suelen llamarse <code>geom</code> o <code>geometry</code>: <code>world$geom</code> se refiere al elemento espacial del objeto <code>world</code> descrito previamente.
Estas columnas de geometría son ‘columnas lista’ de la clase sfc (véase el apartado <a href="spatial-class.html#sfc">2.2.7</a>).
A su vez, los objetos <code>sfc</code> (Simple Feature geometry list-Column) se componen de uno o varios objetos de la clase <code>sfg</code> (Simple Feature Geometries): geometrías simples que se describen en la sección <a href="spatial-class.html#sfg">2.2.6</a>.

</p>
<p>Para entender cómo funcionan los componentes espaciales de simple features, es vital entender las geometrías simples (sfg).
Por este motivo, en el apartado <a href="spatial-class.html#geometry">2.2.5</a> se tratan todos los tipos de <code>sfg</code> actualmente admitidos, antes de pasar a describir cómo pueden representarse en R a partir de objetos <code>sfg</code>, los cuales constituyen las bases de los objetos <code>sfc</code> y, eventualmente, la totalidad de los objetos <code>sf</code>.</p>

<div class="rmdnote">
El fragmento de código anterior utiliza <code>=</code> para crear un nuevo objeto llamado <code>world_mini</code> en el comando <code>world_mini = world[1:2, 1:3]</code>.
Esto se llama asignación.
Un comando equivalente para obtener el mismo resultado es <code>world_mini &lt;- world[1:2, 1:3]</code>.
Aunque la ‘flecha’ es más comúnmente usada, usamos el símbolo <code>=</code> porque es ligeramente más rápido de escribir y más fácil de enseñar debido a la compatibilidad con otros lenguajes comúnmente usados como Python y JavaScript.
Cuál usar es en gran medida una cuestión de preferencia, siempre y cuando seas consistente (paquetes como <strong>styler</strong> pueden ser usados para cambiar el estilo).
</div>
</div>
<div id="por-qué-simple-features" class="section level3" number="2.2.2">
<h3>
<span class="header-section-number">2.2.2</span> ¿Por qué Simple Features?<a class="anchor" aria-label="anchor" href="#por-qu%C3%A9-simple-features"><i class="fas fa-link"></i></a>
</h3>
<p>Simple features es un modelo de datos ampliamente aceptado que subyace en las estructuras de datos de muchas aplicaciones SIG, incluyendo QGIS y PostGIS.
Una de las principales ventajas es que el uso del modelo de datos garantiza la transferencia de tu trabajo a otras configuraciones, por ejemplo, importar desde y exportar hacia otras bases de datos espaciales.
</p>
<p>Una pregunta más específica desde la perspectiva de R es “¿por qué utilizar el paquete <strong>sf</strong> cuando <strong>sp</strong> ya está probado y comprobado?” Hay muchas razones (relacionadas con las ventajas del modelo Simple features):</p>
<ul>
<li>Lectura y escritura rápida de datos</li>
<li>Mejora del rendimiento de los gráficos</li>
<li>Los objetos <strong>sf</strong> pueden ser tratados como marcos de datos en la mayoría de las operaciones</li>
<li>Las funciones <strong>sf</strong> pueden combinarse mediante el operador <code>%&gt;%</code> y funcionan bien con la colección <a href="http://tidyverse.org/">tidyverse</a> de paquetes R</li>
<li>Los nombres de las funciones <strong>sf</strong> son relativamente coherentes e intuitivos (todos comienzan por <code>st_</code>)</li>
</ul>
<p>Debido a estas ventajas, algunos paquetes espaciales (como <strong>tmap</strong>, <strong>mapview</strong> y <strong>tidycensus</strong>) han añadido compatibilidades con <strong>sf</strong>.
Sin embargo, la mayoría de los paquetes tardarán muchos años en hacer la transición y algunos nunca la harán.
Afortunadamente, éstos aún pueden seguir utilizándose en un flujo de trabajo basado en objetos <code>sf</code>, convirtiéndolos a la clase <code>Spatial</code> utilizada en <strong>sp</strong>:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/edzer/sp/">sp</a></span><span class="op">)</span>
<span class="va">world_sp</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/methods/as.html">as</a></span><span class="op">(</span><span class="va">world</span>, Class <span class="op">=</span> <span class="st">"Spatial"</span><span class="op">)</span>
<span class="co"># sp functions ...</span></code></pre></div>
<p>Los objetos espaciales pueden volver a convertirse en <code>sf</code> de la misma manera o con <code><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html">st_as_sf()</a></code>:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">world_sf</span> <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html">st_as_sf</a></span><span class="op">(</span><span class="va">world_sp</span><span class="op">)</span></code></pre></div>
</div>
<div id="basic-map" class="section level3" number="2.2.3">
<h3>
<span class="header-section-number">2.2.3</span> Elaboración de un mapa básico<a class="anchor" aria-label="anchor" href="#basic-map"><i class="fas fa-link"></i></a>
</h3>
<p>Los mapas básicos pueden crearse en <strong>sf</strong> con <code><a href="https://rdrr.io/pkg/terra/man/plot.html">plot()</a></code>.
Por defecto, esto crea un gráfico compuesto de varios paneles (como <code><a href="https://rdrr.io/pkg/sp/man/spplot.html">spplot()</a></code> de <strong>sp</strong>), un sub-gráfico para cada variable del objeto, como se ilustra en el panel de la izquierda en la Figura <a href="spatial-class.html#fig:sfplot">2.4</a>.
Se produce una leyenda o “clave” con una paleta de colores continua si el objeto que se va a trazar tiene una sola variable (véase el panel de la derecha).
Los colores también pueden establecerse con <code>col =</code>, aunque esto no creará una paleta continua ni una leyenda.
</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html">plot</a></span><span class="op">(</span><span class="va">world</span><span class="op">[</span><span class="fl">3</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html">plot</a></span><span class="op">(</span><span class="va">world</span><span class="op">[</span><span class="st">"pop"</span><span class="op">]</span><span class="op">)</span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:sfplot"></span>
<img src="02-datos-espaciales_files/figure-html/sfplot-1.png" alt="Gráficos con sf, con múltiples variables (izquierda) y con una única variable (derecha)." width="49%"><img src="02-datos-espaciales_files/figure-html/sfplot-2.png" alt="Gráficos con sf, con múltiples variables (izquierda) y con una única variable (derecha)." width="49%"><p class="caption">
FIGURE 2.4: Gráficos con sf, con múltiples variables (izquierda) y con una única variable (derecha).
</p>
</div>
<p>Los gráficos se añaden como capas a las imágenes existentes estableciendo <code>add = TRUE</code>.<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;
&lt;code&gt;plot()&lt;/code&gt; aplicado a los objetos &lt;strong&gt;sf&lt;/strong&gt; usa &lt;code&gt;sf:::plot.sf()&lt;/code&gt; en segundo plano.
&lt;code&gt;plot()&lt;/code&gt; es un método genérico que se comporta de manera diferente dependiendo de la clase de objeto que se está representando. &lt;/p&gt;"><sup>8</sup></a>
Para demostrar esto, y para proporcionar una muestra del contenido cubierto en los capítulos <a href="attr.html#attr">3</a> y <a href="#spatial-operations"><strong>??</strong></a> sobre las operaciones de atributos y datos espaciales, el siguiente fragmento de código combina países de Asia:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">world_asia</span> <span class="op">=</span> <span class="va">world</span><span class="op">[</span><span class="va">world</span><span class="op">$</span><span class="va">continent</span> <span class="op">==</span> <span class="st">"Asia"</span>, <span class="op">]</span>
<span class="va">asia</span> <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_combine.html">st_union</a></span><span class="op">(</span><span class="va">world_asia</span><span class="op">)</span></code></pre></div>
<p>Ahora podemos representar el continente asiático sobre un mapa del mundo.
Ten en cuenta que el primer gráfico sólo debe tener una variable para que <code>add = TRUE</code> funcione.
Si el primer gráfico tiene una leyenda, debe usarse <code>reset = FALSE</code> (el resultado no se muestra):</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html">plot</a></span><span class="op">(</span><span class="va">world</span><span class="op">[</span><span class="st">"pop"</span><span class="op">]</span>, reset <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html">plot</a></span><span class="op">(</span><span class="va">asia</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, col <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></code></pre></div>
<p>Añadir capas de esta manera puede servir para verificar la correspondencia geográfica entre capas: la función <code><a href="https://rdrr.io/pkg/terra/man/plot.html">plot()</a></code> es rápida de ejecutar y requiere pocas líneas de código, pero no crea mapas interactivos con una amplia gama de opciones.
Para la creación de mapas más avanzados, recomendamos utilizar paquetes de visualización dedicados a ello, como <strong>tmap</strong> (véase el capítulo <a href="#adv-map"><strong>??</strong></a>).</p>
</div>
<div id="base-args" class="section level3" number="2.2.4">
<h3>
<span class="header-section-number">2.2.4</span> Argumentos básicos de plot()<a class="anchor" aria-label="anchor" href="#base-args"><i class="fas fa-link"></i></a>
</h3>
<p>Hay varias formas de modificar los mapas con el método <code><a href="https://rdrr.io/pkg/terra/man/plot.html">plot()</a></code> de <strong>sf</strong>.
Dado que <strong>sf</strong> amplía los métodos de representación gráfica básicos de R, los argumentos de <code><a href="https://rdrr.io/pkg/terra/man/plot.html">plot()</a></code> como <code>main =</code> (que especifica el título del mapa) funcionan con los objetos <code>sf</code> (véase <code><a href="https://rdrr.io/r/graphics/plot.default.html">?graphics::plot</a></code> y <code><a href="https://rdrr.io/r/graphics/par.html">?par</a></code>).<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;
Nota: Varios argumentos del gráfico son ignorados en los mapas de facetas cuando se representa más de una columna &lt;code&gt;sf&lt;/code&gt;.&lt;/p&gt;"><sup>9</sup></a>

</p>
<p>La figura <a href="spatial-class.html#fig:contpop">2.5</a> ilustra esta flexibilidad superponiendo círculos, cuyos diámetros (fijados con <code>cex =</code>) representan las poblaciones de los países, en un mapa del mundo.
Se puede crear una versión no proyectada de esta figura con los siguientes comandos (véanse los ejercicios al final de este capítulo y el script <a href="https://github.com/Robinlovelace/geocompr/blob/main/code/02-contpop.R"><code>02-contplot.R</code></a> para reproducir la Figura <a href="spatial-class.html#fig:contpop">2.5</a>):</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html">plot</a></span><span class="op">(</span><span class="va">world</span><span class="op">[</span><span class="st">"continent"</span><span class="op">]</span>, reset <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="va">cex</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/math-generics.html">sqrt</a></span><span class="op">(</span><span class="va">world</span><span class="op">$</span><span class="va">pop</span><span class="op">)</span> <span class="op">/</span> <span class="fl">10000</span>
<span class="va">world_cents</span> <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_unary.html">st_centroid</a></span><span class="op">(</span><span class="va">world</span>, of_largest <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html">st_geometry</a></span><span class="op">(</span><span class="va">world_cents</span><span class="op">)</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, cex <span class="op">=</span> <span class="va">cex</span><span class="op">)</span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:contpop"></span>
<img src="02-datos-espaciales_files/figure-html/contpop-1.png" alt="Continentes por países (representados por colores) y poblaciones de 2015 (representadas por círculos, con área proporcional a su población)." width="100%"><p class="caption">
FIGURE 2.5: Continentes por países (representados por colores) y poblaciones de 2015 (representadas por círculos, con área proporcional a su población).
</p>
</div>
<p>El código anterior utiliza la función <code><a href="https://r-spatial.github.io/sf/reference/geos_unary.html">st_centroid()</a></code> para convertir un tipo de geometría (polígonos) en otra (puntos) (véase el capítulo <a href="#geometric-operations"><strong>??</strong></a>), cuya estética se modifica mediante el argumento <code>cex</code>.
</p>
<p>El método de graficación de <strong>sf</strong> también tiene argumentos específicos para los datos geográficos. <code>expandBB</code>, por ejemplo, puede usarse para representar un objeto sf en su contexto:
toma un vector numérico de longitud cuatro que expande el contorno del gráfico relativo a cero en el siguiente orden: abajo, izquierda, arriba, derecha.
Esto se utiliza para dibujar India en el contexto de sus gigantescos vecinos asiáticos, con énfasis en China al este, en el siguiente fragmento de código, que genera la Figura <a href="spatial-class.html#fig:china">2.6</a> (véanse los ejercicios más adelante sobre la adición de texto a los gráficos):</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">india</span> <span class="op">=</span> <span class="va">world</span><span class="op">[</span><span class="va">world</span><span class="op">$</span><span class="va">name_long</span> <span class="op">==</span> <span class="st">"India"</span>, <span class="op">]</span>
<span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html">st_geometry</a></span><span class="op">(</span><span class="va">india</span><span class="op">)</span>, expandBB <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.2</span>, <span class="fl">0.1</span>, <span class="fl">1</span><span class="op">)</span>, col <span class="op">=</span> <span class="st">"gray"</span>, lwd <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html">plot</a></span><span class="op">(</span><span class="va">world_asia</span><span class="op">[</span><span class="fl">0</span><span class="op">]</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:china"></span>
<img src="02-datos-espaciales_files/figure-html/china-1.png" alt="India en su contexto, mostrando el resultado del argumento expandBB." width="50%"><p class="caption">
FIGURE 2.6: India en su contexto, mostrando el resultado del argumento expandBB.
</p>
</div>
<p>Nótese el uso de <code>[0]</code> para mantener sólo la columna de geometría y <code>lwd</code> para enfatizar India.
Véase la sección <a href="#other-mapping-packages"><strong>??</strong></a> para otras técnicas de visualización para representar distintos tipos de geometrías, el tema de la siguiente sección.</p>
</div>
<div id="geometry" class="section level3" number="2.2.5">
<h3>
<span class="header-section-number">2.2.5</span> Tipos de geometrías<a class="anchor" aria-label="anchor" href="#geometry"><i class="fas fa-link"></i></a>
</h3>
<p>Las geometrías son los componentes básicos de Simple features.
Simple features en R pueden adoptar uno de los 17 tipos de geometría compatibles con el paquete <strong>sf</strong>.


En este capítulo nos centraremos en los siete tipos más utilizados: <code>PUNTO</code>, <code>LÍNEA</code>, <code>POLÍGONO</code>, <code>MULTIPUNTO</code>, <code>MULTILÍNEA</code>, <code>MULTIPOLÍGONO</code> y <code>COLECCIÓN GEOMÉTRICA</code>.
Encontrarás la lista completa de tipos disponibles en el <a href="http://postgis.net/docs/using_postgis_dbmanagement.html">manual de PostGIS</a>.</p>
<p>Por lo general, la codificación estándar para Simple features es la binaria conocida (well-known binary en inglés (WKB)) o el texto conocido (well-known text en inglés (WKT)).



Las representaciones de WKB suelen ser cadenas hexadecimales fácilmente legibles para los ordenadores.
Por ello, los SIG y las bases de datos espaciales utilizan WKB para transferir y almacenar objetos geométricos.
WKT, por otra parte, es una descripción de texto legible para el ser humano de Simple features.
Ambos formatos son intercambiables, y si debemos presentar uno, naturalmente elegiremos la representación WKT.</p>
<p>Las bases de cada tipo de geometría son los puntos.
Un punto es simplemente una coordenada en el espacio 2D, 3D o 4D (véase <code><a href="https://r-spatial.github.io/sf/articles/sf1.html">vignette("sf1")</a></code> para más información) así como (véase el panel izquierdo de la figura <a href="spatial-class.html#fig:sfcs">2.7</a>):
</p>
<ul>
<li><code>POINT (5 2)</code></li>
</ul>
<p>
Una cadena de líneas es una secuencia de puntos con una línea recta que los une, por ejemplo (véase el panel central de la figura <a href="spatial-class.html#fig:sfcs">2.7</a>):</p>
<ul>
<li><code>LINESTRING (1 5, 4 4, 4 1, 2 2, 3 2)</code></li>
</ul>
<p>Un polígono es una secuencia de puntos que forman un anillo cerrado y sin intersecciones.
Cerrado significa que el primer y el último punto de un polígono tienen las mismas coordenadas (véase el panel derecho de la figura <a href="spatial-class.html#fig:sfcs">2.7</a>).[
Por definición, un polígono tiene un límite exterior (anillo exterior) y puede tener cero o más límites interiores (anillos interiores), también conocidos como agujeros.
Un polígono con agujeros serían, por ejemplo, <code>POLYGON ((1 5, 2 2, 4 1, 4 4, 1 5), (2 4, 3 4, 3 3, 2 3, 2 4))</code>]
</p>
<ul>
<li>Polígono cerrado: <code>POLYGON ((1 5, 2 2, 4 1, 4 4, 1 5))</code>
</li>
</ul>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:sfcs"></span>
<img src="02-datos-espaciales_files/figure-html/sfcs-1.png" alt="Ilustración de geometrías de puntos, líneas y polígonos." width="100%"><p class="caption">
FIGURE 2.7: Ilustración de geometrías de puntos, líneas y polígonos.
</p>
</div>
<p>Hasta ahora hemos creado geometrías con una sola entidad geométrica por objeto.
Sin embargo, <strong>sf</strong> también permite la existencia de múltiples geometrías dentro de un único elemento (de ahí el término “colección de geometrías”) utilizando la versión “multi” de cada tipo de geometría:
</p>
<ul>
<li>Multipunto: <code>MULTIPOINT (5 2, 1 3, 3 4, 3 2)</code>
</li>
<li>Multilínea: <code>MULTILINESTRING ((1 5, 4 4, 4 1, 2 2, 3 2), (1 2, 2 4))</code>
</li>
<li>Multipolígono: <code>MULTIPOLYGON (((1 5, 2 2, 4 1, 4 4, 1 5), (0 2, 1 2, 1 3, 0 3, 0 2)))</code>
</li>
</ul>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:multis"></span>
<img src="02-datos-espaciales_files/figure-html/multis-1.png" alt="Illustration of multi* geometries." width="100%"><p class="caption">
FIGURE 2.8: Illustration of multi* geometries.
</p>
</div>
<p>Por último, una colección de geometrías puede contener cualquier combinación de geometrías, incluidos (multi)puntos y cadenas de líneas (véase la figura <a href="spatial-class.html#fig:geomcollection">2.9</a>):
</p>
<ul>
<li>Colección de geometrías: <code>GEOMETRYCOLLECTION (MULTIPOINT (5 2, 1 3, 3 4, 3 2), LINESTRING (1 5, 4 4, 4 1, 2 2, 3 2))</code>
</li>
</ul>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:geomcollection"></span>
<img src="02-datos-espaciales_files/figure-html/geomcollection-1.png" alt="Ilustración de una colección de geometrías." width="33%"><p class="caption">
FIGURE 2.9: Ilustración de una colección de geometrías.
</p>
</div>
</div>
<div id="sfg" class="section level3" number="2.2.6">
<h3>
<span class="header-section-number">2.2.6</span> Geometrías de Simple features (sfg)<a class="anchor" aria-label="anchor" href="#sfg"><i class="fas fa-link"></i></a>
</h3>
<p>La clase <code>sfg</code> (Simple feature geometry en inglés) representa los diferentes tipos de geometrías de Simple features en R: punto, línea, polígono (y sus equivalentes ‘multi,’ como multipuntos) o colección de geometrías.
</p>
<p>Por lo general, te ahorras la tediosa tarea de crear geometrías por tu cuenta, ya que puedes simplemente importar un archivo espacial ya existente.
Sin embargo, existe un conjunto de funciones para crear objetos <code>sfg</code> desde cero si es necesario.
Los nombres de estas funciones son sencillos y coherentes, ya que todas comienzan con el prefijo <code>st_</code> y terminan con el nombre del tipo de geometría en minúsculas:</p>
<ul>
<li>Punto: <code><a href="https://r-spatial.github.io/sf/reference/st.html">st_point()</a></code>
</li>
<li>Línea: <code><a href="https://r-spatial.github.io/sf/reference/st.html">st_linestring()</a></code>
</li>
<li>Polígono: <code><a href="https://r-spatial.github.io/sf/reference/st.html">st_polygon()</a></code>
</li>
<li>Multipunto: <code><a href="https://r-spatial.github.io/sf/reference/st.html">st_multipoint()</a></code>
</li>
<li>Multilínea: <code><a href="https://r-spatial.github.io/sf/reference/st.html">st_multilinestring()</a></code>
</li>
<li>Multipolígono: <code><a href="https://r-spatial.github.io/sf/reference/st.html">st_multipolygon()</a></code>
</li>
<li>Colección geométrica: <code><a href="https://r-spatial.github.io/sf/reference/st.html">st_geometrycollection()</a></code>
</li>
</ul>
<p>Los objetos <code>sfg</code> pueden crearse a partir de tres tipos de datos básicos de R:</p>
<ol style="list-style-type: decimal">
<li>Un vector numérico: un solo punto</li>
<li>Una matriz: un conjunto de puntos, donde cada fila representa un punto, un multipunto o una línea</li>
<li>Una lista: una colección de objetos como matrices, multilíneas o colecciones de geometrías</li>
</ol>
<p>La función <code><a href="https://r-spatial.github.io/sf/reference/st.html">st_point()</a></code> crea puntos únicos a partir de vectores numéricos:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>                 <span class="co"># XY point</span>
<span class="co">#&gt; POINT (5 2)</span>
<span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span>              <span class="co"># XYZ point</span>
<span class="co">#&gt; POINT Z (5 2 3)</span>
<span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">2</span>, <span class="fl">1</span><span class="op">)</span>, dim <span class="op">=</span> <span class="st">"XYM"</span><span class="op">)</span> <span class="co"># XYM point</span>
<span class="co">#&gt; POINT M (5 2 1)</span>
<span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span>           <span class="co"># XYZM point</span>
<span class="co">#&gt; POINT ZM (5 2 3 1)</span></code></pre></div>
<p>Los resultados muestran que los tipos de punto XY (coordenadas 2D), XYZ (coordenadas 3D) y XYZM (3D con una variable adicional, normalmente la precisión de la medición) se crean a partir de vectores de longitud 2, 3 y 4, respectivamente.
El tipo XYM debe especificarse mediante el argumento <code>dim</code> (que es la abreviatura de dimensión).</p>
<p>Por el contrario, utiliza matrices en el caso de los objetos multipunto (<code><a href="https://r-spatial.github.io/sf/reference/st.html">st_multipoint()</a></code>) y en líneas (<code><a href="https://r-spatial.github.io/sf/reference/st.html">st_linestring()</a></code>):</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># la función rbind simplifica la creación de matrices</span>
<span class="co">## MULTIPUNTO</span>
<span class="va">multipoint_matrix</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html">st_multipoint</a></span><span class="op">(</span><span class="va">multipoint_matrix</span><span class="op">)</span>
<span class="co">#&gt; MULTIPOINT ((5 2), (1 3), (3 4), (3 2))</span>
<span class="co">## LÍNEA</span>
<span class="va">linestring_matrix</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">4</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">1</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html">st_linestring</a></span><span class="op">(</span><span class="va">linestring_matrix</span><span class="op">)</span>
<span class="co">#&gt; LINESTRING (1 5, 4 4, 4 1, 2 2, 3 2)</span></code></pre></div>
<p>Por último, utiliza listas para la creación de multilíneas, (multi)polígonos y colecciones de geometrías:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## POLÍGONO</span>
<span class="va">polygon_list</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">1</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">4</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html">st_polygon</a></span><span class="op">(</span><span class="va">polygon_list</span><span class="op">)</span>
<span class="co">#&gt; POLYGON ((1 5, 2 2, 4 1, 4 4, 1 5))</span></code></pre></div>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## POLÍGONO no cerrado</span>
<span class="va">polygon_border</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">1</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">4</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span>
<span class="va">polygon_hole</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">4</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">3</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span>
<span class="va">polygon_with_hole_list</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">polygon_border</span>, <span class="va">polygon_hole</span><span class="op">)</span>
<span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html">st_polygon</a></span><span class="op">(</span><span class="va">polygon_with_hole_list</span><span class="op">)</span>
<span class="co">#&gt; POLYGON ((1 5, 2 2, 4 1, 4 4, 1 5), (2 4, 3 4, 3 3, 2 3, 2 4))</span></code></pre></div>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## MULTILÍNEA</span>
<span class="va">multilinestring_list</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">4</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">1</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>, 
                            <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html">st_multilinestring</a></span><span class="op">(</span><span class="op">(</span><span class="va">multilinestring_list</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; MULTILINESTRING ((1 5, 4 4, 4 1, 2 2, 3 2), (1 2, 2 4))</span></code></pre></div>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## MULTIPOLÍGONO</span>
<span class="va">multipolygon_list</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">1</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">4</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,
                         <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">3</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html">st_multipolygon</a></span><span class="op">(</span><span class="va">multipolygon_list</span><span class="op">)</span>
<span class="co">#&gt; MULTIPOLYGON (((1 5, 2 2, 4 1, 4 4, 1 5)), ((0 2, 1 2, 1 3, 0 3, 0 2)))</span></code></pre></div>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## COLECCIÓN GEOMÉTRICA</span>
<span class="va">gemetrycollection_list</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html">st_multipoint</a></span><span class="op">(</span><span class="va">multipoint_matrix</span><span class="op">)</span>,
                              <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html">st_linestring</a></span><span class="op">(</span><span class="va">linestring_matrix</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html">st_geometrycollection</a></span><span class="op">(</span><span class="va">gemetrycollection_list</span><span class="op">)</span>
<span class="co">#&gt; GEOMETRYCOLLECTION (MULTIPOINT (5 2, 1 3, 3 4, 3 2),</span>
<span class="co">#&gt;   LINESTRING (1 5, 4 4, 4 1, 2 2, 3 2))</span></code></pre></div>
</div>
<div id="sfc" class="section level3" number="2.2.7">
<h3>
<span class="header-section-number">2.2.7</span> Columnas de simple features (sfc)<a class="anchor" aria-label="anchor" href="#sfc"><i class="fas fa-link"></i></a>
</h3>
<p>Un objeto <code>sfg</code> contiene una sola geometría de Simple feature.
Una columna de simple feature (Simple feature column en inglés (<code>sfc</code>)) es una lista de objetos <code>sfg</code>, que además puede contener información sobre el sistema de referencia de coordenadas en uso.
Por ejemplo, para combinar dos objetos simple feature en un objeto con dos elementos, podemos utilizar la función <code><a href="https://r-spatial.github.io/sf/reference/sfc.html">st_sfc()</a></code>.

Esto es importante puesto que <code>sfc</code> representa la columna de geometría en los marcos de datos <strong>sf</strong>:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># PUNTO sfc </span>
<span class="va">point1</span> <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>
<span class="va">point2</span> <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span>
<span class="va">points_sfc</span> <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html">st_sfc</a></span><span class="op">(</span><span class="va">point1</span>, <span class="va">point2</span><span class="op">)</span>
<span class="va">points_sfc</span>
<span class="co">#&gt; Geometry set for 2 features </span>
<span class="co">#&gt; Geometry type: POINT</span>
<span class="co">#&gt; Dimension:     XY</span>
<span class="co">#&gt; Bounding box:  xmin: 1 ymin: 2 xmax: 5 ymax: 3</span>
<span class="co">#&gt; CRS:           NA</span>
<span class="co">#&gt; POINT (5 2)</span>
<span class="co">#&gt; POINT (1 3)</span></code></pre></div>
<p>En la mayoría de los casos, un objeto <code>sfc</code> contiene objetos del mismo tipo de geometría.
Por lo tanto, cuando convirtamos objetos <code>sfg</code> de tipo polígono en una columna de <code>sfg</code>, acabaríamos también con un objeto <code>sfc</code> de tipo polígono, lo cual puede verificarse con <code><a href="https://r-spatial.github.io/sf/reference/st_geometry_type.html">st_geometry_type()</a></code>.
Igualmente, una columna de geometría de multilíneas resultaría en un objeto <code>sfc</code> de tipo multilíneas:</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># POLÍGONO sfc </span>
<span class="va">polygon_list1</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">1</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">4</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="va">polygon1</span> <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html">st_polygon</a></span><span class="op">(</span><span class="va">polygon_list1</span><span class="op">)</span>
<span class="va">polygon_list2</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">3</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="va">polygon2</span> <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html">st_polygon</a></span><span class="op">(</span><span class="va">polygon_list2</span><span class="op">)</span>
<span class="va">polygon_sfc</span> <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html">st_sfc</a></span><span class="op">(</span><span class="va">polygon1</span>, <span class="va">polygon2</span><span class="op">)</span>
<span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry_type.html">st_geometry_type</a></span><span class="op">(</span><span class="va">polygon_sfc</span><span class="op">)</span>
<span class="co">#&gt; [1] POLYGON POLYGON</span>
<span class="co">#&gt; 18 Levels: GEOMETRY POINT LINESTRING POLYGON MULTIPOINT ... TRIANGLE</span></code></pre></div>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># MULTILÍNEA sfc </span>
<span class="va">multilinestring_list1</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">4</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">1</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>, 
                            <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="va">multilinestring1</span> <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html">st_multilinestring</a></span><span class="op">(</span><span class="op">(</span><span class="va">multilinestring_list1</span><span class="op">)</span><span class="op">)</span>
<span class="va">multilinestring_list2</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">9</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">7</span>, <span class="fl">9</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">6</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">7</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">7</span><span class="op">)</span><span class="op">)</span>, 
                            <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">7</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">8</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="va">multilinestring2</span> <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html">st_multilinestring</a></span><span class="op">(</span><span class="op">(</span><span class="va">multilinestring_list2</span><span class="op">)</span><span class="op">)</span>
<span class="va">multilinestring_sfc</span> <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html">st_sfc</a></span><span class="op">(</span><span class="va">multilinestring1</span>, <span class="va">multilinestring2</span><span class="op">)</span>
<span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry_type.html">st_geometry_type</a></span><span class="op">(</span><span class="va">multilinestring_sfc</span><span class="op">)</span>
<span class="co">#&gt; [1] MULTILINESTRING MULTILINESTRING</span>
<span class="co">#&gt; 18 Levels: GEOMETRY POINT LINESTRING POLYGON MULTIPOINT ... TRIANGLE</span></code></pre></div>
<p>También es posible crear un objeto <code>sfc</code> a partir de objetos <code>sfg</code> con diferentes tipos de geometrías:</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># GEOMETRÍA sfc </span>
<span class="va">point_multilinestring_sfc</span> <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html">st_sfc</a></span><span class="op">(</span><span class="va">point1</span>, <span class="va">multilinestring1</span><span class="op">)</span>
<span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry_type.html">st_geometry_type</a></span><span class="op">(</span><span class="va">point_multilinestring_sfc</span><span class="op">)</span>
<span class="co">#&gt; [1] POINT           MULTILINESTRING</span>
<span class="co">#&gt; 18 Levels: GEOMETRY POINT LINESTRING POLYGON MULTIPOINT ... TRIANGLE</span></code></pre></div>
<p>Como se ha mencionado anteriormente, los objetos <code>sfc</code> pueden almacenar adicionalmente información sobre los sistemas de referencia de coordenadas (SRC).
Para especificar un determinado SRC, podemos utilizar los atributos <code>epsg (SRID)</code> o <code>proj4string</code> de un objeto <code>sfc</code>.
El valor por defecto de <code>epsg (SRID)</code> y <code>proj4string</code> es <code>NA</code> (No disponible o <em>Not Available</em> en inglés), como se puede comprobar con <code><a href="https://r-spatial.github.io/sf/reference/st_crs.html">st_crs()</a></code>:</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html">st_crs</a></span><span class="op">(</span><span class="va">points_sfc</span><span class="op">)</span>
<span class="co">#&gt; Coordinate Reference System: NA</span></code></pre></div>
<p>Todas las geometrías de un objeto <code>sfc</code> deben tener el mismo SRC.
Podemos añadir el sistema de referencia de coordenadas como argumento <code>crs</code> de <code><a href="https://r-spatial.github.io/sf/reference/sfc.html">st_sfc()</a></code>.
Este argumento acepta un número entero con el código <code>epsg</code> como <code>4326</code>, el cual añade automáticamente el ‘proj4string’ (véase la sección <a href="spatial-class.html#crs-intro">2.4</a>):</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># definición EPSG </span>
<span class="va">points_sfc_wgs</span> <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html">st_sfc</a></span><span class="op">(</span><span class="va">point1</span>, <span class="va">point2</span>, crs <span class="op">=</span> <span class="fl">4326</span><span class="op">)</span>
<span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html">st_crs</a></span><span class="op">(</span><span class="va">points_sfc_wgs</span><span class="op">)</span>
<span class="co">#&gt; Coordinate Reference System:</span>
<span class="co">#&gt;   User input: EPSG:4326 </span>
<span class="co">#&gt;   wkt:</span>
<span class="co">#&gt; GEOGCRS["WGS 84",</span>
<span class="co">#&gt;     DATUM["World Geodetic System 1984",</span>
<span class="co">#&gt;         ELLIPSOID["WGS 84",6378137,298.257223563,</span>
<span class="co">#&gt;             LENGTHUNIT["metre",1]]],</span>
<span class="co">#&gt;     PRIMEM["Greenwich",0,</span>
<span class="co">#&gt;         ANGLEUNIT["degree",0.0174532925199433]],</span>
<span class="co">#&gt;     CS[ellipsoidal,2],</span>
<span class="co">#&gt;         AXIS["geodetic latitude (Lat)",north,</span>
<span class="co">#&gt;             ORDER[1],</span>
<span class="co">#&gt;             ANGLEUNIT["degree",0.0174532925199433]],</span>
<span class="co">#&gt;         AXIS["geodetic longitude (Lon)",east,</span>
<span class="co">#&gt;             ORDER[2],</span>
<span class="co">#&gt;             ANGLEUNIT["degree",0.0174532925199433]],</span>
<span class="co">#&gt;     USAGE[</span>
<span class="co">#&gt;         SCOPE["unknown"],</span>
<span class="co">#&gt;         AREA["World"],</span>
<span class="co">#&gt;         BBOX[-90,-180,90,180]],</span>
<span class="co">#&gt;     ID["EPSG",4326]]</span></code></pre></div>
<p>También acepta un proj4string sin procesar (el resultado no se muestra):</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># definición PROJ4STRING </span>
<span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html">st_sfc</a></span><span class="op">(</span><span class="va">point1</span>, <span class="va">point2</span>, crs <span class="op">=</span> <span class="st">"+proj=longlat +datum=WGS84 +no_defs"</span><span class="op">)</span></code></pre></div>

<div class="rmdnote">
A veces <code><a href="https://r-spatial.github.io/sf/reference/st_crs.html">st_crs()</a></code> devolverá un <code>proj4string</code> pero no un código <code>epsg</code>.
Esto se debe a que no existe un método general para convertir de <code>proj4string</code> a <code>epsg</code> (véase el capítulo <a href="#reproj-geo-data"><strong>??</strong></a>).
</div>
</div>
<div id="sf" class="section level3" number="2.2.8">
<h3>
<span class="header-section-number">2.2.8</span> La clase sf<a class="anchor" aria-label="anchor" href="#sf"><i class="fas fa-link"></i></a>
</h3>
<p>Los apartados <a href="spatial-class.html#geometry">2.2.5</a> a <a href="spatial-class.html#sfc">2.2.7</a> tratan de objetos puramente geométricos, ‘sf geometry’ y ‘sf column’ respectivamente.
Estos son bloques de construcción geográficos de datos vectoriales geográficos representados como simple features.
El último bloque de construcción son los atributos no geográficos, los cuales representan el nombre de la función u otros atributos como los valores medidos, los grupos y otras cosas.
</p>
<p>Para ilustrar los atributos, representaremos una temperatura de 25°C en Londres el 21 de junio de 2017.
Este ejemplo contiene una geometría (las coordenadas), y tres atributos con tres clases diferentes (nombre del lugar, temperatura y fecha).<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;
Otros atributos pueden incluir una categoría de localidad (ciudad o pueblo), o una observación si la medición se realizó con una estación automática.&lt;/p&gt;"><sup>10</sup></a>
Los objetos de clase <code>sf</code> representan esos datos combinando los atributos (<code>data.frame</code>) con la columna de geometrías simple (<code>sfc</code>).
Éstos son creados con <code><a href="https://r-spatial.github.io/sf/reference/sf.html">st_sf()</a></code> como se ilustra a continuación, lo cual crea el ejemplo de Londres descrito anteriormente:</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">lnd_point</span> <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html">st_point</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/c.html">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">51.5</span><span class="op">)</span><span class="op">)</span>                 <span class="co"># objeto sfg </span>
<span class="va">lnd_geom</span> <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html">st_sfc</a></span><span class="op">(</span><span class="va">lnd_point</span>, crs <span class="op">=</span> <span class="fl">4326</span><span class="op">)</span>           <span class="co"># objeto sfc </span>
<span class="va">lnd_attrib</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>                           <span class="co"># objeto data.frame </span>
  name <span class="op">=</span> <span class="st">"London"</span>,
  temperature <span class="op">=</span> <span class="fl">25</span>,
  date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="st">"2017-06-21"</span><span class="op">)</span>
  <span class="op">)</span>
<span class="va">lnd_sf</span> <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sf.html">st_sf</a></span><span class="op">(</span><span class="va">lnd_attrib</span>, geometry <span class="op">=</span> <span class="va">lnd_geom</span><span class="op">)</span>    <span class="co"># objeto sf </span></code></pre></div>
<p>¿Qué ha pasado? En primer lugar, las coordenadas se utilizaron para crear la geometría simple feature (<code>sfg</code>).
En segundo lugar, la geometría se convirtió en una columna de geometrías simple feature (<code>sfc</code>), con un SRC.
En tercer lugar, los atributos se almacenaron en un <code>data.frame</code>, que se combinó con el objeto <code>sfc</code> con <code><a href="https://r-spatial.github.io/sf/reference/sf.html">st_sf()</a></code>.
Esto da como resultado un objeto <code>sf</code>, como se demuestra a continuación (se omiten algunos resultados):</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">lnd_sf</span>
<span class="co">#&gt; Simple feature collection with 1 features and 3 fields</span>
<span class="co">#&gt; ...</span>
<span class="co">#&gt;     name temperature       date         geometry</span>
<span class="co">#&gt; 1 London          25 2017-06-21 POINT (0.1 51.5)</span></code></pre></div>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">lnd_sf</span><span class="op">)</span>
<span class="co">#&gt; [1] "sf"         "data.frame"</span></code></pre></div>
<p>El resultado muestra que los objetos <code>sf</code> tienen en realidad dos clases, <code>sf</code> y <code>data.frame</code>.
<code>sf</code> son simplemente marcos de datos (tablas cuadradas), pero con atributos espaciales almacenados en una columna con forma de lista, normalmente llamada <code>geometría</code>, como se describe en el apartado <a href="spatial-class.html#intro-sf">2.2.1</a>.
Esta dualidad es fundamental para el concepto de simple features:
la mayoría de las veces, un <code>sf</code> puede tratarse y comportarse como un <code>data.frame</code>.
Simple features son, en esencia, marcos de datos con una extensión espacial.</p>
</div>
</div>
<div id="datos-rasterizados" class="section level2" number="2.3">
<h2>
<span class="header-section-number">2.3</span> Datos rasterizados<a class="anchor" aria-label="anchor" href="#datos-rasterizados"><i class="fas fa-link"></i></a>
</h2>
<p>El modelo de datos espaciales rasterizados representa el mundo con la cuadrícula continua de celdas (a menudo también llamadas píxeles; <a href="spatial-class.html#fig:raster-intro-plot">2.10</a>:A).
Este modelo de datos suele referirse a las llamadas cuadrículas regulares, en las que cada celda tiene el mismo tamaño constante, y en este libro nos centraremos únicamente en las cuadrículas regulares.
Sin embargo, existen otros tipos de cuadrículas, como las cuadrículas rotadas, cizalladas, rectilíneas y curvilíneas (véase el capítulo 1 de <span class="citation"><a href="attr.html#ref-pebesma_spatial_2022" role="doc-biblioref">E. Pebesma and Bivand</a> (<a href="attr.html#ref-pebesma_spatial_2022" role="doc-biblioref">2022</a>)</span> o el capítulo 2 de <span class="citation"><a href="attr.html#ref-tennekes_elegant_2022" role="doc-biblioref">Tennekes and Nowosad</a> (<a href="attr.html#ref-tennekes_elegant_2022" role="doc-biblioref">2022</a>)</span>)).</p>
<p>El modelo de datos ráster suele consistir en una cabecera ráster
y una matriz (con filas y columnas) que representa celdas igualmente espaciadas (a menudo también llamadas píxeles; Figura <a href="spatial-class.html#fig:raster-intro-plot">2.10</a>:A).<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;
Dependiendo del formato de archivo, la cabecera forma parte del propio archivo de datos de la imagen, por ejemplo, GeoTIFF, o se almacena en una cabecera adicional o en un archivo mundial, por ejemplo, los formatos de cuadrícula ASCII.
También existe el formato ráster binario sin cabecera (plano) que debería facilitar la importación en varios programas de software.&lt;/p&gt;"><sup>11</sup></a>
La cabecera ráster define el sistema de referencia de coordenadas, la extensión y el origen.


El origen (o punto de partida) suele ser la coordenada de la esquina inferior izquierda de la matriz (el paquete <strong>terra</strong>, sin embargo, utiliza la esquina superior izquierda, por defecto (Figura <a href="spatial-class.html#fig:raster-intro-plot">2.10</a>:B)).
La cabecera define la extensión mediante el número de columnas, el número de filas y la resolución del tamaño de las celdas.
Por lo tanto, partiendo del origen, podemos acceder fácilmente a cada celda y modificarla utilizando su ID (Figura <a href="spatial-class.html#fig:raster-intro-plot">2.10</a>:B) o especificando explícitamente las filas y las columnas.
Esta representación matricial evita almacenar explícitamente las coordenadas de los cuatro puntos de las esquinas (de hecho, sólo almacena una coordenada, el origen) de cada celda, como ocurriría con los polígonos vectoriales rectangulares.
Esto y el álgebra de mapas (apartado (map-algebra)) hacen que el procesamiento de rásters sea mucho más eficiente y rápido que el de datos vectoriales.
Sin embargo, a diferencia de los datos vectoriales, la celda de una capa ráster sólo puede contener un único valor. El valor puede ser numérico o categórico (Figura <a href="spatial-class.html#fig:raster-intro-plot">2.10</a>:C).</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:raster-intro-plot"></span>
<img src="02-datos-espaciales_files/figure-html/raster-intro-plot-1.png" alt="Tipos de datos ráster: (A) IDs de celdas, (B) valores de celdas, (C) un mapa raster coloreado." width="100%"><p class="caption">
FIGURE 2.10: Tipos de datos ráster: (A) IDs de celdas, (B) valores de celdas, (C) un mapa raster coloreado.
</p>
</div>
<p>Los mapas ráster suelen representar fenómenos continuos como la elevación, la temperatura, la densidad de población o los datos espectrales (Figura <a href="spatial-class.html#fig:raster-intro-plot2">2.11</a>).
Por supuesto, también podemos representar características discretas, como las clases de suelo o de cobertura del suelo, con la ayuda de un modelo de datos raster (Figura <a href="spatial-class.html#fig:raster-intro-plot2">2.11</a>).
En consecuencia, los límites discretos de estas características se difuminan y, dependiendo de la tarea espacial, podría ser más adecuada una representación vectorial.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:raster-intro-plot2"></span>
<img src="02-datos-espaciales_files/figure-html/raster-intro-plot2-1.png" alt="Ejemplos de rásters continuos y categóricos." width="100%"><p class="caption">
FIGURE 2.11: Ejemplos de rásters continuos y categóricos.
</p>
</div>
<div id="paquetes-de-r-para-el-manejo-de-datos-rasterizados" class="section level3" number="2.3.1">
<h3>
<span class="header-section-number">2.3.1</span> Paquetes de R para el manejo de datos rasterizados<a class="anchor" aria-label="anchor" href="#paquetes-de-r-para-el-manejo-de-datos-rasterizados"><i class="fas fa-link"></i></a>
</h3>
<!--jn:toDo - update:-->
<!-- one intro paragraph about terra + stars -->
<!-- maybe also add comparison table -->
</div>
<div id="introducción-a-terra" class="section level3" number="2.3.2">
<h3>
<span class="header-section-number">2.3.2</span> Introducción a terra<a class="anchor" aria-label="anchor" href="#introducci%C3%B3n-a-terra"><i class="fas fa-link"></i></a>
</h3>
<p>El paquete <strong>terra</strong> soporta objetos raster en R.
Proporciona un amplio conjunto de funciones para crear, leer, exportar, manipular y procesar conjuntos de datos raster.
Aparte de la manipulación general de datos ráster, <strong>terra</strong> proporciona muchas funciones de bajo nivel que pueden constituir la base para desarrollar una funcionalidad ráster más avanzada.

<strong>terra</strong> también permite trabajar con grandes conjuntos de datos ráster que son demasiado grandes para caber en una memoria principal.
En este caso, <strong>terra</strong> ofrece la posibilidad de dividir el raster en fragmentos más pequeños, y los procesa iterativamente en lugar de cargar todo el archivo raster en la RAM.</p>
<p>Para ilustrar los conceptos de <strong>terra</strong>, utilizaremos los conjuntos de datos de <strong>spDataLarge</strong>.
Se trata de unos cuantos objetos ráster y un objeto vectorial que cubren una zona del Parque Nacional de Zion (Utah, EE.UU.).
Por ejemplo, <code>srtm.tif</code> es un modelo digital de elevación de esta zona (para más detalles, véase su documentación con <code><a href="https://rdrr.io/pkg/spDataLarge/man/srtm.html">?srtm</a></code>).
En primer lugar, vamos a crear un objeto <code>SpatRaster</code> llamado <code>my_rast</code>:</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">raster_filepath</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">"raster/srtm.tif"</span>, package <span class="op">=</span> <span class="st">"spDataLarge"</span><span class="op">)</span>
<span class="va">my_rast</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html">rast</a></span><span class="op">(</span><span class="va">raster_filepath</span><span class="op">)</span></code></pre></div>
<p>Al escribir el nombre del raster en la consola, el resultado será la cabecera del raster (dimensiones, resolución, extensión, SRC) y alguna información adicional (clase, fuente de datos, resumen de los valores del ráster):</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_rast</span>
<span class="co">#&gt; class       : SpatRaster </span>
<span class="co">#&gt; dimensions  : 457, 465, 1  (nrow, ncol, nlyr)</span>
<span class="co">#&gt; resolution  : 0.000833, 0.000833  (x, y)</span>
<span class="co">#&gt; extent      : -113, -113, 37.1, 37.5  (xmin, xmax, ymin, ymax)</span>
<span class="co">#&gt; coord. ref. : lon/lat WGS 84 (EPSG:4326) </span>
<span class="co">#&gt; source      : srtm.tif </span>
<span class="co">#&gt; name        : srtm </span>
<span class="co">#&gt; min value   : 1024 </span>
<span class="co">#&gt; max value   : 2892</span></code></pre></div>
<p>Las funciones dedicadas informan de cada componente: <code>dim(my_rast)</code> retorna el número de filas, columnas y capas; <code><a href="https://rdrr.io/pkg/terra/man/dimensions.html">ncell()</a></code> el número de celdas (píxeles); <code><a href="https://rdrr.io/pkg/terra/man/dimensions.html">res()</a></code> la resolución espacial; <code><a href="https://rdrr.io/pkg/terra/man/ext.html">ext()</a></code> su extensión espacial; y <code><a href="https://rdrr.io/pkg/terra/man/crs.html">crs()</a></code> su sistema de referencia de coordenadas (la reproyección raster se trata en la Sección <a href="#reprojecting-raster-geometries"><strong>??</strong></a>).
<code><a href="https://rdrr.io/pkg/terra/man/sources.html">inMemory()</a></code> informa de si los datos raster están almacenados en memoria o en disco.</p>
<p><code><a href="https://rdrr.io/pkg/terra/man/terra-package.html">help("terra-package")</a></code> retorna una lista completa de todas las funciones disponibles de <strong>terra</strong></p>
</div>
<div id="basic-map-raster" class="section level3" number="2.3.3">
<h3>
<span class="header-section-number">2.3.3</span> Elaboración de mapas básicos<a class="anchor" aria-label="anchor" href="#basic-map-raster"><i class="fas fa-link"></i></a>
</h3>
<p>Al igual que el paquete <strong>sf</strong>, <strong>terra</strong> también proporciona métodos <code><a href="https://rdrr.io/pkg/terra/man/plot.html">plot()</a></code> para sus propias clases.
</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html">plot</a></span><span class="op">(</span><span class="va">my_rast</span><span class="op">)</span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:basic-new-raster-plot"></span>
<img src="02-datos-espaciales_files/figure-html/basic-new-raster-plot-1.png" alt="Gráfico raster básico." width="100%"><p class="caption">
FIGURE 2.12: Gráfico raster básico.
</p>
</div>
<p>Existen otros enfoques para representar datos ráster en R que quedan fuera del alcance de esta sección, por ejemplo:</p>
<ul>
<li>paquetes como <strong>tmap</strong> para crear mapas estáticos e interactivos de objetos raster y vectoriales (véase el capítulo <a href="#adv-map"><strong>??</strong></a>)</li>
<li>funciones, por ejemplo <code>levelplot()</code> del paquete <strong>rasterVis</strong>, para crear facetas, una técnica común para visualizar el cambio en el tiempo</li>
</ul>
</div>
<div id="raster-classes" class="section level3" number="2.3.4">
<h3>
<span class="header-section-number">2.3.4</span> Clases ráster<a class="anchor" aria-label="anchor" href="#raster-classes"><i class="fas fa-link"></i></a>
</h3>
<p>La clase <code>SpatRaster</code> representa un objeto raster en <strong>terra</strong>.
La forma más fácil de crear un objeto raster en R es leer un archivo raster desde el disco o desde un servidor (Sección <a href="#raster-data-1"><strong>??</strong></a>).
</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">single_raster_file</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">"raster/srtm.tif"</span>, package <span class="op">=</span> <span class="st">"spDataLarge"</span><span class="op">)</span>
<span class="va">single_rast</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html">rast</a></span><span class="op">(</span><span class="va">raster_filepath</span><span class="op">)</span></code></pre></div>
<p>El paquete <strong>terra</strong> soporta numerosos controles con la ayuda de la librería GDAL.
Los rásters de los archivos no suelen ser leídos en su totalidad en la memoria RAM, a excepción de su cabecera y un puntero al propio archivo.</p>
<p>Los rásters también pueden crearse desde cero utilizando la misma función <code><a href="https://rdrr.io/pkg/terra/man/rast.html">rast()</a></code>.
Esto se ilustra en el siguiente fragmento de código, que da como resultado un nuevo objeto <code>SpatRaster</code>.
El raster resultante consta de 36 celdas (6 columnas y 6 filas especificadas por <code>nrows</code> y <code>ncols</code>) centradas alrededor del Primer Meridiano y el Ecuador (ver parámetros <code>xmin</code>, <code>xmax</code>, <code>ymin</code> y <code>ymax</code>).
El SRC por defecto de los objetos ráster es WGS84, pero puede cambiarse con el argumento <code>crs</code>.
Esto significa que la unidad de la resolución está en grados, que fijamos en 0,5 (<code>resolución</code>).
Los valores (<code>vals</code>) se asignan a cada celda: 1 a la celda 1, 2 a la celda 2, y así sucesivamente.
Recuerda: <code><a href="https://rdrr.io/pkg/terra/man/rast.html">rast()</a></code> rellena las celdas por filas (a diferencia de <code><a href="https://rdrr.io/r/base/matrix.html">matrix()</a></code>) empezando por la esquina superior izquierda, lo que significa que la fila superior contiene los valores del 1 al 6, la segunda del 7 al 12, etc.</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">new_raster</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html">rast</a></span><span class="op">(</span>nrows <span class="op">=</span> <span class="fl">6</span>, ncols <span class="op">=</span> <span class="fl">6</span>, resolution <span class="op">=</span> <span class="fl">0.5</span>, 
                  xmin <span class="op">=</span> <span class="op">-</span><span class="fl">1.5</span>, xmax <span class="op">=</span> <span class="fl">1.5</span>, ymin <span class="op">=</span> <span class="op">-</span><span class="fl">1.5</span>, ymax <span class="op">=</span> <span class="fl">1.5</span>,
                  vals <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">36</span><span class="op">)</span></code></pre></div>
<p>Para otras formas de crear objetos ráster, véase <code><a href="https://rdrr.io/pkg/terra/man/rast.html">?rast</a></code>.</p>
<p>La clase <code>SpatRaster</code> también maneja múltiples capas, que suelen corresponder a un único archivo de satélite multiespectral o a una serie temporal de rásters.</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">multi_raster_file</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">"raster/landsat.tif"</span>, package <span class="op">=</span> <span class="st">"spDataLarge"</span><span class="op">)</span>
<span class="va">multi_rast</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html">rast</a></span><span class="op">(</span><span class="va">multi_raster_file</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">multi_rast</span>
<span class="co">#&gt; class       : SpatRaster </span>
<span class="co">#&gt; dimensions  : 1428, 1128, 4  (nrow, ncol, nlyr)</span>
<span class="co">#&gt; resolution  : 30, 30  (x, y)</span>
<span class="co">#&gt; extent      : 301905, 335745, 4111245, 4154085  (xmin, xmax, ymin, ymax)</span>
<span class="co">#&gt; coord. ref. : WGS 84 / UTM zone 12N (EPSG:32612) </span>
<span class="co">#&gt; source      : landsat.tif </span>
<span class="co">#&gt; names       : landsat_1, landsat_2, landsat_3, landsat_4 </span>
<span class="co">#&gt; min values  :      7550,      6404,      5678,      5252 </span>
<span class="co">#&gt; max values  :     19071,     22051,     25780,     31961</span></code></pre></div>
<p><code><a href="https://rdrr.io/pkg/terra/man/dimensions.html">nlyr()</a></code> recupera el número de capas almacenadas en un objeto ‘SpatRaster’:</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/terra/man/dimensions.html">nlyr</a></span><span class="op">(</span><span class="va">multi_rast</span><span class="op">)</span>
<span class="co">#&gt; [1] 4</span></code></pre></div>
<!--jn:toDo-->
<!-- what else can be add here? -->
<!-- pointers? reading from urls? -->
<!-- combining or subseting layers? -->
</div>
</div>
<div id="crs-intro" class="section level2" number="2.4">
<h2>
<span class="header-section-number">2.4</span> Sistemas de referencia de coordenadas<a class="anchor" aria-label="anchor" href="#crs-intro"><i class="fas fa-link"></i></a>
</h2>
<p></p>
<p>Los tipos de datos espaciales vectoriales y ráster comparten conceptos intrínsecos a los datos espaciales.
Quizás el más fundamental sea el Sistema de Referencia de Coordenadas (SRC), que define cómo se relacionan los elementos espaciales de los datos con la superficie de la Tierra (u otros cuerpos).
Los SRC son geográficos o proyectados, tal y como se ha introducido al principio de este capítulo (véase la figura <a href="spatial-class.html#fig:vectorplots">2.1</a>).
En esta sección se explicará cada tipo, sentando las bases para la Sección <a href="#reproj-geo-data"><strong>??</strong></a> sobre transformaciones de SRC.</p>
<div id="sistemas-de-coordenadas-geográficas" class="section level3" number="2.4.1">
<h3>
<span class="header-section-number">2.4.1</span> Sistemas de coordenadas geográficas<a class="anchor" aria-label="anchor" href="#sistemas-de-coordenadas-geogr%C3%A1ficas"><i class="fas fa-link"></i></a>
</h3>
<p>
Los sistemas de coordenadas geográficas identifican cualquier ubicación en la superficie de la Tierra mediante dos valores: la longitud y la latitud (véase el panel izquierdo de la figura <a href="spatial-class.html#fig:vector-crs">2.13</a> y <a href="spatial-class.html#fig:raster-crs">2.14</a>).
La <em>longitud</em> es la ubicación en la dirección Este-Oeste en distancia angular desde el plano del Primer Meridiano (también conocido como Meridiano de Greenwich).
La <em>latitud</em> es la distancia angular al Norte o al Sur del plano ecuatorial.
Por tanto, las distancias en los SRC geográficos no se miden en metros.
Esto tiene importantes consecuencias, como se demuestra en la sección <a href="#reproj-geo-data"><strong>??</strong></a>.</p>
<p>La superficie de la Tierra en los sistemas de coordenadas geográficas se representa mediante una superficie esférica o elipsoidal.
Los modelos esféricos suponen que la Tierra es una esfera perfecta de un radio determinado; tienen la ventaja de la simplicidad pero, al mismo tiempo, son inexactos: ¡la Tierra no es una esfera!
Los modelos elipsoidales se definen mediante dos parámetros: el radio ecuatorial y el radio polar.
Éstos son adecuados porque la Tierra está comprimida: el radio ecuatorial es unos 11,5 km más largo que el radio polar <span class="citation">(<a href="attr.html#ref-maling_coordinate_1992" role="doc-biblioref">Maling 1992</a>)</span>.<a href="#fn12" class="footnote-ref" id="fnref12"><sup>12</sup></a></p>
<!--jn:toDo-->
<!-- consider adding a new graphic with ellipsoid (left panel) -->
<!-- and two datums on an ellipsoid (right panel) -->
<p>Los elipsoides forman parte de un componente más amplio de los SRC: el <em>datum</em>.
Éste contiene información sobre el elipsoide que debe utilizarse y la relación precisa entre las coordenadas cartesianas y la ubicación en la superficie de la Tierra.
<!-- These additional details are stored in the `towgs84` argument of [proj4string](https://proj.org/operations/conversions/latlon.html) notation (see [proj.org/usage/projections.html](https://proj.org/usage/projections.html) for details). -->
<!-- These allow local variations in Earth's surface, for example due to large mountain ranges, to be accounted for in a local CRS. --></p>
<p>Hay dos tipos de datum: geocéntrico y local.
En un <em>dato geocéntrico</em>, como el <code>WGS84</code>, el centro es el centro de gravedad de la Tierra y la precisión de las proyecciones no está optimizada para una ubicación específica.
En un <em>dato local</em>, como el <code>NAD83</code>, la superficie elipsoidal se desplaza para alinearse con la superficie de un lugar concreto.
<!--jn:toDo-->
<!--expand--></p>
</div>
<div id="sistemas-de-referencia-de-coordenadas-proyectadas" class="section level3" number="2.4.2">
<h3>
<span class="header-section-number">2.4.2</span> Sistemas de referencia de coordenadas proyectadas<a class="anchor" aria-label="anchor" href="#sistemas-de-referencia-de-coordenadas-proyectadas"><i class="fas fa-link"></i></a>
</h3>
<!--jn:toDo-->
<!--reorder the below par-->
<p>
Los SRC proyectados se basan en coordenadas cartesianas sobre una superficie implícitamente plana (panel derecho de las Figuras <a href="spatial-class.html#fig:vector-crs">2.13</a> y <a href="spatial-class.html#fig:raster-crs">2.14</a>).
Tienen un origen, unos ejes x e y y una unidad de medida lineal como los metros.
Todos los SRC proyectados se basan en un SRC geográfico, descrito en la sección anterior, y se apoyan en proyecciones cartográficas para convertir la superficie tridimensional de la Tierra en valores de Este y Norte (x e y) en un SRC proyectado.</p>
<p>Esta transición no puede realizarse sin añadir algunas deformaciones.
Por tanto, algunas propiedades de la superficie terrestre se distorsionan en este proceso, como el área, la dirección, la distancia y la forma.
Un sistema de coordenadas proyectado puede conservar sólo una o dos de esas propiedades.
Las proyecciones suelen denominarse en función de la propiedad que preservan: las de áreas iguales preservan el área, la azimutal preserva la dirección, la equidistante preserva la distancia y la conformal preserva la forma local.</p>
<!--jn:toDo-->
<!--add info about projections trying to minimize all distortions-->
<!--jn:toDo-->
<!--consider adding new figure showing three main projection types-->
<p>Existen tres grupos principales de tipos de proyección: cónica, cilíndrica y planar (azimutal).
En una proyección cónica, la superficie de la Tierra se proyecta en un cono a lo largo de una única línea de tangencia o de dos líneas de tangencia.
Las distorsiones se minimizan a lo largo de las líneas de tangencia y aumentan con la distancia desde esas líneas en esta proyección.
Por lo tanto, es la más adecuada para los mapas de zonas de latitud media.
Una proyección cilíndrica representa la superficie en un cilindro.
Esta proyección también puede crearse tocando la superficie de la Tierra a lo largo de una sola línea de tangencia o de dos líneas de tangencia.
Las proyecciones cilíndricas son las que más se utilizan para cartografiar el mundo en su totalidad.
Una proyección plana proyecta los datos sobre una superficie plana que toca el globo en un punto o a lo largo de una línea de tangencia.
Se suele utilizar para cartografiar regiones polares.
<code>sf_proj_info(type = "proj")</code> ofrece una lista de las proyecciones disponibles que admite la librería PROJ.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:vector-crs"></span>
<img src="figures/02_vector_crs.png" alt="Ejemplos de sistemas de coordenadas geográficas (WGS 84; izquierda) y proyectadas (NAD83 / zona UTM 12N; derecha) para datos vectoriales." width="100%"><p class="caption">
FIGURE 2.13: Ejemplos de sistemas de coordenadas geográficas (WGS 84; izquierda) y proyectadas (NAD83 / zona UTM 12N; derecha) para datos vectoriales.
</p>
</div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:raster-crs"></span>
<img src="figures/02_raster_crs.png" alt="Ejemplos de sistemas de coordenadas geográficas (WGS 84; izquierda) y proyectadas (NAD83 / zona UTM 12N; derecha) para datos rasterizados." width="100%"><p class="caption">
FIGURE 2.14: Ejemplos de sistemas de coordenadas geográficas (WGS 84; izquierda) y proyectadas (NAD83 / zona UTM 12N; derecha) para datos rasterizados.
</p>
</div>
</div>
<div id="crs-in-r" class="section level3" number="2.4.3">
<h3>
<span class="header-section-number">2.4.3</span> SRC en R<a class="anchor" aria-label="anchor" href="#crs-in-r"><i class="fas fa-link"></i></a>
</h3>
<p>


Dos formas recomendables de describir los SRC en R son (a) los identificadores de sistemas de referencia espacial (Spatial Reference System Identifiers en inglés (SRID)) o (b) las definiciones de texto conocidas (<code>WKT2</code>).
Ambos enfoques tienen ventajas y desventajas.</p>
<!--jn:toDo-->
<!-- rephrase the following paragraph from `epsg` into SRID -->
<p>Un código <code>epsg</code> suele ser más corto y, por tanto, más fácil de recordar.
El código también se refiere a un solo sistema de referencia de coordenadas bien definido.</p>
<!--jn:toDo-->
<!--add WKT2 paragraph-->
<!--jn:toDo-->
<!--add proj4string paragraph-->
<!-- On the other hand, a `proj4string` definition allows you more flexibility when it comes to specifying different parameters such as the projection type, the datum and the ellipsoid.^[ -->
<!-- A complete list of the `proj4string` parameters can be found at https://proj.org. -->
<!-- ]  -->
<!-- This way you can specify many different projections, and modify existing ones. -->
<!-- This also makes the `proj4string` approach more complicated. -->
<!-- `epsg` points to exactly one particular CRS. -->
<p>Los paquetes espaciales de R admiten una amplia gama de SRC y utilizan la biblioteca <a href="https://proj.org">PROJ</a>, establecida desde hace tiempo.
<!--jn:toDo-->
<!--mention websites and the crssuggest package-->
<!-- Other than searching for EPSG codes online, another quick way to find out about available CRSs is via the `rgdal::make_EPSG()` function, which outputs a data frame of available projections. -->
<!-- Before going into more detail, it is worth learning how to view and filter them inside R, as this could save time trawling the internet. -->
<!-- The following code will show available CRSs interactively, allowing you to filter ones of interest (try filtering for the OSGB CRSs for example): --></p>
<!-- ```{r 02-spatial-data-51, eval=FALSE} -->
<!-- crs_data = rgdal::make_EPSG() -->
<!-- View(crs_data) -->
<!-- ``` -->
<p>En <strong>sf</strong> el SRC de un objeto puede ser recuperado usando <code><a href="https://r-spatial.github.io/sf/reference/st_crs.html">st_crs()</a></code>.
Para ello, necesitamos leer un conjunto de datos vectoriales:</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">vector_filepath</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span><span class="op">(</span><span class="st">"vector/zion.gpkg"</span>, package <span class="op">=</span> <span class="st">"spDataLarge"</span><span class="op">)</span>
<span class="va">new_vector</span> <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html">st_read</a></span><span class="op">(</span><span class="va">vector_filepath</span><span class="op">)</span></code></pre></div>
<p>Nuestro nuevo objeto, <code>new_vector</code>, es un polígono que representa los límites del Parque Nacional de Zion (<code><a href="https://rdrr.io/pkg/spDataLarge/man/zion.html">?zion</a></code>).</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html">st_crs</a></span><span class="op">(</span><span class="va">new_vector</span><span class="op">)</span> <span class="co"># get CRS</span>
<span class="co">#&gt; Coordinate Reference System:</span>
<span class="co">#&gt;   User input: UTM Zone 12, Northern Hemisphere </span>
<span class="co">#&gt;   wkt:</span>
<span class="co">#&gt; BOUNDCRS[</span>
<span class="co">#&gt;     SOURCECRS[</span>
<span class="co">#&gt;         PROJCRS["UTM Zone 12, Northern Hemisphere",</span>
<span class="co">#&gt;             BASEGEOGCRS["GRS 1980(IUGG, 1980)",</span>
<span class="co">#&gt;                 DATUM["unknown",</span>
<span class="co">#&gt;                     ELLIPSOID["GRS80",6378137,298.257222101,</span>
<span class="co">#&gt;                         LENGTHUNIT["metre",1,</span>
<span class="co">#&gt;                             ID["EPSG",9001]]]],</span>
<span class="co">#&gt;                 PRIMEM["Greenwich",0,</span>
<span class="co">#&gt;                     ANGLEUNIT["degree",0.0174532925199433]]],</span>
<span class="co">#&gt;             CONVERSION["UTM zone 12N",</span>
<span class="co">#&gt;                 METHOD["Transverse Mercator",</span>
<span class="co">#&gt;                     ID["EPSG",9807]],</span>
<span class="co">#&gt;                 PARAMETER["Latitude of natural origin",0,</span>
<span class="co">#&gt;                     ANGLEUNIT["degree",0.0174532925199433],</span>
<span class="co">#&gt;                     ID["EPSG",8801]],</span>
<span class="co">#&gt;                 PARAMETER["Longitude of natural origin",-111,</span>
<span class="co">#&gt;                     ANGLEUNIT["degree",0.0174532925199433],</span>
<span class="co">#&gt;                     ID["EPSG",8802]],</span>
<span class="co">#&gt;                 PARAMETER["Scale factor at natural origin",0.9996,</span>
<span class="co">#&gt;                     SCALEUNIT["unity",1],</span>
<span class="co">#&gt;                     ID["EPSG",8805]],</span>
<span class="co">#&gt;                 PARAMETER["False easting",500000,</span>
<span class="co">#&gt;                     LENGTHUNIT["Meter",1],</span>
<span class="co">#&gt;                     ID["EPSG",8806]],</span>
<span class="co">#&gt;                 PARAMETER["False northing",0,</span>
<span class="co">#&gt;                     LENGTHUNIT["Meter",1],</span>
<span class="co">#&gt;                     ID["EPSG",8807]],</span>
<span class="co">#&gt;                 ID["EPSG",16012]],</span>
<span class="co">#&gt;             CS[Cartesian,2],</span>
<span class="co">#&gt;                 AXIS["(E)",east,</span>
<span class="co">#&gt;                     ORDER[1],</span>
<span class="co">#&gt;                     LENGTHUNIT["Meter",1]],</span>
<span class="co">#&gt;                 AXIS["(N)",north,</span>
<span class="co">#&gt;                     ORDER[2],</span>
<span class="co">#&gt;                     LENGTHUNIT["Meter",1]]]],</span>
<span class="co">#&gt;     TARGETCRS[</span>
<span class="co">#&gt;         GEOGCRS["WGS 84",</span>
<span class="co">#&gt;             DATUM["World Geodetic System 1984",</span>
<span class="co">#&gt;                 ELLIPSOID["WGS 84",6378137,298.257223563,</span>
<span class="co">#&gt;                     LENGTHUNIT["metre",1]]],</span>
<span class="co">#&gt;             PRIMEM["Greenwich",0,</span>
<span class="co">#&gt;                 ANGLEUNIT["degree",0.0174532925199433]],</span>
<span class="co">#&gt;             CS[ellipsoidal,2],</span>
<span class="co">#&gt;                 AXIS["latitude",north,</span>
<span class="co">#&gt;                     ORDER[1],</span>
<span class="co">#&gt;                     ANGLEUNIT["degree",0.0174532925199433]],</span>
<span class="co">#&gt;                 AXIS["longitude",east,</span>
<span class="co">#&gt;                     ORDER[2],</span>
<span class="co">#&gt;                     ANGLEUNIT["degree",0.0174532925199433]],</span>
<span class="co">#&gt;             ID["EPSG",4326]]],</span>
<span class="co">#&gt;     ABRIDGEDTRANSFORMATION["Transformation from GRS 1980(IUGG, 1980) to WGS84",</span>
<span class="co">#&gt;         METHOD["Position Vector transformation (geog2D domain)",</span>
<span class="co">#&gt;             ID["EPSG",9606]],</span>
<span class="co">#&gt;         PARAMETER["X-axis translation",0,</span>
<span class="co">#&gt;             ID["EPSG",8605]],</span>
<span class="co">#&gt;         PARAMETER["Y-axis translation",0,</span>
<span class="co">#&gt;             ID["EPSG",8606]],</span>
<span class="co">#&gt;         PARAMETER["Z-axis translation",0,</span>
<span class="co">#&gt;             ID["EPSG",8607]],</span>
<span class="co">#&gt;         PARAMETER["X-axis rotation",0,</span>
<span class="co">#&gt;             ID["EPSG",8608]],</span>
<span class="co">#&gt;         PARAMETER["Y-axis rotation",0,</span>
<span class="co">#&gt;             ID["EPSG",8609]],</span>
<span class="co">#&gt;         PARAMETER["Z-axis rotation",0,</span>
<span class="co">#&gt;             ID["EPSG",8610]],</span>
<span class="co">#&gt;         PARAMETER["Scale difference",1,</span>
<span class="co">#&gt;             ID["EPSG",8611]]]]</span></code></pre></div>
<p>En los casos en que falta un sistema de referencia de coordenadas (SRC) o se establece un SRC incorrecto, se puede utilizar la función <code><a href="https://r-spatial.github.io/sf/reference/st_crs.html">st_set_crs()</a></code>:</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">new_vector</span> <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html">st_set_crs</a></span><span class="op">(</span><span class="va">new_vector</span>, <span class="st">"EPSG:26912"</span><span class="op">)</span> <span class="co"># set CRS</span>
<span class="co">#&gt; Warning: st_crs&lt;- : replacing crs does not reproject data; use st_transform for</span>
<span class="co">#&gt; that</span></code></pre></div>
<p>El mensaje de advertencia nos informa de que la función <code><a href="https://r-spatial.github.io/sf/reference/st_crs.html">st_set_crs()</a></code> no transforma los datos de un SRC a otro.</p>
<p>La función <code><a href="https://rdrr.io/pkg/terra/man/crs.html">crs()</a></code> se puede utilizar para acceder a la información del SRC desde un objeto <code>SpatRaster</code>:</p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/terra/man/crs.html">crs</a></span><span class="op">(</span><span class="va">my_rast</span><span class="op">)</span> <span class="co"># get CRS</span>
<span class="co">#&gt; [1] "GEOGCRS[\"WGS 84\",\n    DATUM[\"World Geodetic System 1984\",\n        ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n            LENGTHUNIT[\"metre\",1]]],\n    PRIMEM[\"Greenwich\",0,\n        ANGLEUNIT[\"degree\",0.0174532925199433]],\n    CS[ellipsoidal,2],\n        AXIS[\"geodetic latitude (Lat)\",north,\n            ORDER[1],\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        AXIS[\"geodetic longitude (Lon)\",east,\n            ORDER[2],\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n    ID[\"EPSG\",4326]]"</span></code></pre></div>
<p>La misma función, <code><a href="https://rdrr.io/pkg/terra/man/crs.html">crs()</a></code>, se utiliza para establecer un SRC para los objetos raster.</p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_rast2</span> <span class="op">=</span> <span class="va">my_rast</span>
<span class="fu"><a href="https://rdrr.io/pkg/terra/man/crs.html">crs</a></span><span class="op">(</span><span class="va">my_rast2</span><span class="op">)</span> <span class="op">=</span> <span class="st">"EPSG:26912"</span> <span class="co"># set CRS</span></code></pre></div>
<p>Es importante destacar que las funciones <code><a href="https://r-spatial.github.io/sf/reference/st_crs.html">st_crs()</a></code> y <code><a href="https://rdrr.io/pkg/terra/man/crs.html">crs()</a></code> no alteran los valores de las coordenadas ni las geometrías.
Su función es sólo la de establecer los metadatos sobre el objeto SRC.
Ampliaremos los SRC y explicaremos cómo proyectar de un SRC a otro en el capítulo <a href="#reproj-geo-data"><strong>??</strong></a>.</p>
</div>
</div>
<div id="paquete-units" class="section level2" number="2.5">
<h2>
<span class="header-section-number">2.5</span> Paquete Units<a class="anchor" aria-label="anchor" href="#paquete-units"><i class="fas fa-link"></i></a>
</h2>
<!-- https://cran.r-project.org/web/packages/units/vignettes/measurement_units_in_R.html -->
<p>Una característica importante de los SRC es que contienen información sobre las unidades espaciales.
Está claro que es vital saber si las medidas de una casa están en pies o en metros, y lo mismo ocurre con los mapas.
Es una buena práctica cartográfica añadir una <em>barra de escala</em> o algún otro indicador de distancia en los mapas para demostrar la relación entre las distancias en la página o la pantalla y las distancias sobre el terreno.
Del mismo modo, es importante especificar formalmente las unidades en las que se miden los datos geométricos o las celdas para proporcionar un contexto, y garantizar que los cálculos posteriores se realicen en contexto.</p>
<p>Una característica novedosa de los datos geométricos en los objetos <code>sf</code> es que tienen <em>soporte nativo</em> para las unidades.
Esto significa que la distancia, el área y otros cálculos geométricos en <strong>sf</strong> devuelven valores que vienen con un atributo de <code>unidades</code>, definido por el paquete <strong>Units</strong> <span class="citation">(<a href="attr.html#ref-pebesma_measurement_2016" role="doc-biblioref">E. Pebesma, Mailund, and Hiebert 2016</a>)</span>.
Esto es ventajoso, ya que evita la confusión causada por las diferentes unidades (la mayoría de los SRC utilizan metros, algunos utilizan pies) y proporciona información sobre la dimensionalidad.
Esto se demuestra en el siguiente fragmento de código, que calcula la superficie de Luxemburgo:

</p>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">luxembourg</span> <span class="op">=</span> <span class="va">world</span><span class="op">[</span><span class="va">world</span><span class="op">$</span><span class="va">name_long</span> <span class="op">==</span> <span class="st">"Luxembourg"</span>, <span class="op">]</span></code></pre></div>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_measures.html">st_area</a></span><span class="op">(</span><span class="va">luxembourg</span><span class="op">)</span> <span class="co"># requiere del paquete s2 en versiones recientes de sf</span>
<span class="co">#&gt; 2.41e+09 [m^2]</span></code></pre></div>
<p>El resultado está en unidades de metros cuadrados (m<sup>2</sup>), lo que demuestra que el resultado representa un espacio bidimensional.
Esta información, almacenada como un atributo (que los lectores interesados pueden descubrir con <code>attributes(st_area(luxembourg))</code>), puede aportar a cálculos posteriores que utilicen unidades, como la densidad de población (que se mide en personas por unidad de superficie, normalmente por km<sup>2</sup>).
Informar de las unidades evita confusiones.
Por ejemplo, en el caso de Luxemburgo, si no se especificaran las unidades, se podría suponer erróneamente que se trata de hectáreas.
Para traducir la enorme cifra a un tamaño más digerible, resulta tentador dividir los resultados por un millón (el número de metros cuadrados en un kilómetro cuadrado):</p>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_measures.html">st_area</a></span><span class="op">(</span><span class="va">luxembourg</span><span class="op">)</span> <span class="op">/</span> <span class="fl">1000000</span>
<span class="co">#&gt; 2409 [m^2]</span></code></pre></div>
<p>Sin embargo, el resultado se vuelve a dar incorrectamente como metros cuadrados.
La solución es establecer las unidades correctas con el paquete <strong>Units</strong>:</p>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">units</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/units/man/units.html">set_units</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_measures.html">st_area</a></span><span class="op">(</span><span class="va">luxembourg</span><span class="op">)</span>, <span class="va">km</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span>
<span class="co">#&gt; 2409 [km^2]</span></code></pre></div>
<p>Las unidades tienen la misma importancia en el caso de los datos ráster.
Sin embargo, hasta ahora <strong>sf</strong> es el único paquete espacial que soporta unidades, lo que significa que las personas que trabajan con datos ráster deben abordar los cambios en las unidades de análisis (por ejemplo, la conversión de la anchura de los píxeles de unidades imperiales a decimales) con cuidado.
El objeto <code>my_rast</code> (véase más arriba) utiliza una proyección WGS84 con grados decimales como unidades.
En consecuencia, su resolución también se da en grados decimales, pero hay que conocerla, ya que la función <code><a href="https://rdrr.io/pkg/terra/man/dimensions.html">res()</a></code> simplemente devuelve un vector numérico.</p>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/terra/man/dimensions.html">res</a></span><span class="op">(</span><span class="va">my_rast</span><span class="op">)</span>
<span class="co">#&gt; [1] 0.000833 0.000833</span></code></pre></div>
<p>Si utilizáramos la proyección UTM, las unidades cambiarían.</p>
<!--jn:toDO-->
<!--set eval=TRUE later-->
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">repr</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/project.html">project</a></span><span class="op">(</span><span class="va">my_rast</span>, <span class="st">"EPSG:26912"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/terra/man/dimensions.html">res</a></span><span class="op">(</span><span class="va">repr</span><span class="op">)</span></code></pre></div>
<p>De nuevo, el comando <code><a href="https://rdrr.io/pkg/terra/man/dimensions.html">res()</a></code> devuelve un vector numérico sin ninguna unidad, lo que nos obliga a saber que la unidad de la proyección UTM es el metro.</p>
</div>
<div id="ex2" class="section level2" number="2.6">
<h2>
<span class="header-section-number">2.6</span> Ejercicios<a class="anchor" aria-label="anchor" href="#ex2"><i class="fas fa-link"></i></a>
</h2>

</div>
</div>

  <div class="chapter-nav">
<div class="prev"><a href="intro.html"><span class="header-section-number">1</span> Introducción</a></div>
<div class="next"><a href="attr.html"><span class="header-section-number">3</span> Operaciones de datos de atributos</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#spatial-class"><span class="header-section-number">2</span> Datos geográficos en R</a></li>
<li><a class="nav-link" href="#prerrequisitos">Prerrequisitos</a></li>
<li><a class="nav-link" href="#intro-spatial-class"><span class="header-section-number">2.1</span> Introducción</a></li>
<li>
<a class="nav-link" href="#datos-vectoriales"><span class="header-section-number">2.2</span> Datos vectoriales</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#intro-sf"><span class="header-section-number">2.2.1</span> Introducción a Simple Features</a></li>
<li><a class="nav-link" href="#por-qu%C3%A9-simple-features"><span class="header-section-number">2.2.2</span> ¿Por qué Simple Features?</a></li>
<li><a class="nav-link" href="#basic-map"><span class="header-section-number">2.2.3</span> Elaboración de un mapa básico</a></li>
<li><a class="nav-link" href="#base-args"><span class="header-section-number">2.2.4</span> Argumentos básicos de plot()</a></li>
<li><a class="nav-link" href="#geometry"><span class="header-section-number">2.2.5</span> Tipos de geometrías</a></li>
<li><a class="nav-link" href="#sfg"><span class="header-section-number">2.2.6</span> Geometrías de Simple features (sfg)</a></li>
<li><a class="nav-link" href="#sfc"><span class="header-section-number">2.2.7</span> Columnas de simple features (sfc)</a></li>
<li><a class="nav-link" href="#sf"><span class="header-section-number">2.2.8</span> La clase sf</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#datos-rasterizados"><span class="header-section-number">2.3</span> Datos rasterizados</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#paquetes-de-r-para-el-manejo-de-datos-rasterizados"><span class="header-section-number">2.3.1</span> Paquetes de R para el manejo de datos rasterizados</a></li>
<li><a class="nav-link" href="#introducci%C3%B3n-a-terra"><span class="header-section-number">2.3.2</span> Introducción a terra</a></li>
<li><a class="nav-link" href="#basic-map-raster"><span class="header-section-number">2.3.3</span> Elaboración de mapas básicos</a></li>
<li><a class="nav-link" href="#raster-classes"><span class="header-section-number">2.3.4</span> Clases ráster</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#crs-intro"><span class="header-section-number">2.4</span> Sistemas de referencia de coordenadas</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#sistemas-de-coordenadas-geogr%C3%A1ficas"><span class="header-section-number">2.4.1</span> Sistemas de coordenadas geográficas</a></li>
<li><a class="nav-link" href="#sistemas-de-referencia-de-coordenadas-proyectadas"><span class="header-section-number">2.4.2</span> Sistemas de referencia de coordenadas proyectadas</a></li>
<li><a class="nav-link" href="#crs-in-r"><span class="header-section-number">2.4.3</span> SRC en R</a></li>
</ul>
</li>
<li><a class="nav-link" href="#paquete-units"><span class="header-section-number">2.5</span> Paquete Units</a></li>
<li><a class="nav-link" href="#ex2"><span class="header-section-number">2.6</span> Ejercicios</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/geocompr/es/blob/main/02-datos-espaciales.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/geocompr/es/edit/main/02-datos-espaciales.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Geocomputación con R</strong>" was written by Robin Lovelace, Jakub Nowosad, Jannes Muenchow. It was last built on 2021-12-24.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
